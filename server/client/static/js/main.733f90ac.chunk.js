(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(30),o=a.n(s),i=(a(69),a(5)),c=a(11),l=a(10),d=(a(70),a(63)),u=a(7),m=a(60),h=a(9),f=a(113),p=a(115),g=a(116),b=a(114),j=new function e(){var t=this;Object(i.a)(this,e),this.isFirstName=function(e){return RegExp(t.firstNamePattern).test(e)},this.isLastName=function(e){return RegExp(t.lastNamePattern).test(e)},this.isEmail=function(e){return RegExp(t.emailPattern).test(e)},this.isDate=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date(parseInt(t)+1+"/"+a+"/"+e);return r.getFullYear()===parseInt(e)&&r.getMonth()===parseInt(t)&&r.getDate()===parseInt(a)},this.isOldEnough=function(e){return(new Date).getFullYear()-parseInt(e)>=5},this.isDigit=function(e){return/^\d{1}$/.test(e)},this.isDigits=function(e){return/^\d+$/.test(e)},this.isImage=function(e){return/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(e)},this.getImage=function(e,a){return e.find((function(e){return e.path===a.path+("/"===a.path?"":"/")+a.name&&t.isImage(e.name)}))},this.isImages=function(e,a){return e.filter((function(e){return e.path===a.path+("/"===a.path?"":"/")+a.name&&t.isImage(e.name)})).length},this.checkPassword=function(e){var t=0,a=Object.freeze({0:"Worst",1:"Bad",2:"Weak",3:"Good",4:"Strong"});return e.length>=8&&t++,/[a-z]/gi.test(e)&&t++,/\d/g.test(e)&&t++,/[.@#$%^&*(),.?":{}|<>]/g.test(e)&&t++,{isStrong:4===t,level:t,strength:a[t]}},this.getQuery=function(e){return new URLSearchParams(window.location.search).get(e)},this.setQuery=function(e,t){var a=new URLSearchParams(window.location.search);a.set(e,t),window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname,"?").concat(a)))},this.deleteQuery=function(e){var t=new URLSearchParams(window.location.search);t.delete(e),window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname,"?").concat(t)))},this.getToken=function(){return localStorage.getItem("token")||sessionStorage.getItem("token")},this.setToken=function(e){return t.remembered()?localStorage.setItem("token",e):sessionStorage.setItem("token",e)},this.getPayload=function(){return t.loggedIn()?JSON.parse(atob(t.getToken().split(".")[1])):null},this.setId=function(e){return t.remembered()?localStorage.setItem("id",e):sessionStorage.setItem("id",e)},this.getId=function(){return t.remembered()?localStorage.getItem("id"):sessionStorage.getItem("id")},this.setType=function(e){return t.remembered()?localStorage.setItem("type",e):sessionStorage.setItem("type",e)},this.getType=function(){return t.remembered()?localStorage.getItem("type"):sessionStorage.getItem("type")},this.isExpired=function(){return!t.loggedIn()||!!t.getPayload().exp&&1e3*t.getPayload().exp<Date.now()},this.loggedIn=function(){return Boolean(t.getToken())},this.remembered=function(){return"true"===localStorage.getItem("remembered")||"true"===sessionStorage.getItem("remembered")||"false"!==localStorage.getItem("remembered")&&"false"!==sessionStorage.getItem("remembered")&&null},this.logout=function(){localStorage.clear(),sessionStorage.clear(),window.location.reload()},this.firstNamePattern="^[A-Z]{1}[a-z]*$",this.lastNamePattern="^[A-Z]{1}[a-z]*(?: [A-Z]{1}[a-z]*)*(?: [A-Z]{1}[a-z]*)?$",this.emailPattern="[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"},v=a(12),O=a.n(v),x=a(22),y=a(31),N=a.n(y),w=N.a.create({timeout:3e3,headers:{"Content-Type":"application/json"}});w.interceptors.response.use((function(e){return e}),function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.response?alert(t.response.data.msg):console.warn(t),e.abrupt("return",Promise.reject(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var S=w,I=N.a.create();I.interceptors.request.use(function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers={Authorization:"Bearer ".concat(j.getToken()),Accept:"application/json","Content-Type":"application/json"},e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),I.interceptors.response.use((function(e){return e}),function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.response&&440===t.response.status&&window.confirm(t.response.data.msg)?(j.logout(),"/"!==window.location.pathname&&window.open("/")):t.response?alert(t.response.data.msg):console.warn(t),e.abrupt("return",Promise.reject(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var k=I,C="".concat("https://clouddrive16.herokuapp.com/","user/"),D=new function e(){Object(i.a)(this,e),this.create=function(e){return S.post(C,e)},this.read=function(){return k.get(C)}},F=a(0),E=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).toggle=function(){return r.setState({isHover:!r.state.isHover})},r.toggleDropdown=function(){return r.setState({dropdownOpened:!r.state.dropdownOpened})},r.getSearchBar=function(){return document.querySelector(".search-bar")},r.getSearchIn=function(){return document.querySelector(".input-search")},r.getSearchBtn=function(){return document.querySelector(".btn-search")},r.open=function(){r.state.width<801&&(r.getSearchBar().style.position="absolute",r.getSearchBar().style.width="100%",r.getSearchBar().style.left="0",r.getSearchBar().style.background="white",r.getSearchIn().style.display="block",r.getSearchIn().focus(),r.getSearchBtn().style.color="blue",r.setState({opened:!0}))},r.reset=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.getSearchBar().style.width=e?"auto":(r.state.width<1025?250:500)+"px",r.getSearchBar().style.position="static",r.getSearchBar().style.background=e?"blue":"#e1dfdd",r.getSearchBtn().style.color=e?"white":"blue",r.getSearchIn().style.display=e?"none":"flex"},r.coloring=function(e){if("select"===e.type&&r.setState({selected:!0}),"blur"===e.type&&r.setState({selected:!1}),r.state.width>800){var t=r.state.keyword||r.state.selected||"mouseenter"===e.type?"white":"#e1dfdd";"select"===e.type&&(t="white"),"blur"!==e.type||r.state.keyword||(t="#e1dfdd"),document.querySelector(".search-bar").style.background=t}else"mouseleave"===e.type&&(r.reset(),r.setState({opened:!1}))},r.setKeyword=function(e){return r.setState({keyword:e.target.value})},r.componentDidMount=function(){j.loggedIn()&&D.read().then((function(e){r.setState(e.data.user),r.setState({firstName:e.data.user.name.first})}))},r.componentDidUpdate=function(){return window.onresize=function(){r.setState({width:window.innerWidth}),r.reset(r.state.width<801),r.state.opened&&r.open()}},r.render=function(){return Object(F.jsxs)("header",{children:[Object(F.jsxs)("a",{className:"logo",href:"/",onMouseEnter:r.toggle,onMouseLeave:r.toggle,children:[Object(F.jsx)("img",{className:"logo-img ".concat(r.state.width>560&&"mr-1"),src:"logo"+(r.state.isHover?".hover":"")+".png",alt:"Logo"}),r.state.width>560&&"CloudDrive16"]}),Object(F.jsx)("div",{className:"search-bar",onMouseEnter:r.coloring,onMouseLeave:r.coloring,children:Object(F.jsxs)("form",{className:"form-search",children:[Object(F.jsx)("button",{className:"btn-search",type:r.state.width>800||r.state.opened&&r.state.keyword?"submit":"button",disabled:r.state.width>800&&!r.state.keyword,onClick:r.open,children:Object(F.jsx)("i",{className:"material-icons",children:"search"})}),Object(F.jsx)("input",{className:"input-search",type:"search",placeholder:"Search for anything",onSelect:r.coloring,onBlur:r.coloring,onInput:r.setKeyword})]})}),Object(F.jsxs)(f.a,{className:"dropdown-avatar",isOpen:r.state.dropdownOpened,toggle:r.toggleDropdown,children:[j.loggedIn()?Object(F.jsx)(p.a,{className:"avatar",title:r.state.fullName,children:r.state.avatar?Object(F.jsx)("img",{className:"avatar-img",src:r.state.avatar,alt:"".concat(r.state.firstName,"'s avatar")}):"root"===r.state.role?Object(F.jsx)("i",{className:"material-icons",children:"security"}):"admin"===r.state.role?Object(F.jsx)("i",{className:"material-icons",children:"local_police"}):Object(F.jsx)("i",{className:"material-icons",children:"account_circle"})}):Object(F.jsx)("a",{className:"link-help",href:"/help",target:"_blank",children:Object(F.jsx)("i",{className:"material-icons",children:"help_outline"})}),Object(F.jsxs)(g.a,{className:"dropdown-menu-avatar",children:[Object(F.jsxs)(b.a,{className:"dropdown-item-profile",tag:"a",href:"/profile",children:[Object(F.jsx)("p",{className:"text-profile",children:"My profile"}),Object(F.jsx)("i",{className:"material-icons",children:"info"})]}),Object(F.jsx)(b.a,{divider:!0}),Object(F.jsxs)(b.a,{className:"dropdown-item-profile",tag:"a",href:"/help",children:[Object(F.jsx)("p",{className:"text-help",children:"Help"}),Object(F.jsx)("i",{className:"material-icons",children:"help_outline"})]}),Object(F.jsx)(b.a,{divider:!0}),Object(F.jsxs)(b.a,{className:"dropdown-item-logout",onClick:r.logout,children:[Object(F.jsx)("p",{className:"text-logout",children:"Sign out"}),Object(F.jsx)("i",{className:"material-icons",children:"logout"})]})]})]})]})},r.setKeyword=r.setKeyword.bind(Object(h.a)(r)),r.state={firstName:"",fullName:"",avatar:"",role:"",isHover:!1,selected:!1,opened:!1,keyword:"",width:window.innerWidth,dropdownOpened:!1},r}return Object(m.a)(a,[{key:"logout",value:function(){j.logout()}}]),a}(r.Component),P="".concat("https://clouddrive16.herokuapp.com/","auth/"),R=new function e(){Object(i.a)(this,e),this.available=function(e){return S.get("".concat(P).concat(e))},this.authenticate=function(e){return S.post(P,e)},this.verify=function(e){return k.put(P,e)}},q={firstName:"",lastName:"",email:"",password:"",confirm:"",day:(new Date).getDate().toString(),month:(new Date).getMonth().toString(),year:(new Date).getFullYear().toString(),sex:"",available:!0,submitted:!1},T=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).setFirstName=function(e){return r.setState({firstName:e.target.value})},r.setLastName=function(e){return r.setState({lastName:e.target.value})},r.setEmail=function(e){return r.setState({email:e.target.value})},r.setPassword=function(e){return r.setState({password:e.target.value})},r.setConfirm=function(e){return r.setState({confirm:e.target.value})},r.setDay=function(e){return r.setState({day:e.target.value})},r.setMonth=function(e){return r.setState({month:e.target.value})},r.setYear=function(e){return r.setState({year:e.target.value})},r.setSex=function(e){return r.setState({sex:e.target.value})},r.checkSex=function(e){"form-check-female"!==e.target.className&&"form-check-male"!==e.target.className&&"form-check-other"!==e.target.className||r.setState({sex:Array.from(e.target.children)[1].value})},r.enterFirstName=function(e){return e.target.setCustomValidity(e.target.value?j.isFirstName(e.target.value)?"":"Invalid first name.":"This field is required.")},r.enterLastName=function(e){return e.target.setCustomValidity(e.target.value?j.isLastName(e.target.value)?"":"Invalid last name.":"This field is required.")},r.enterEmail=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.available(t.target.value);case 2:a=e.sent.data.available,r.setState({available:a}),t.target.setCustomValidity(t.target.value?j.isEmail(t.target.value)?a?"Email is duplicate.":"":"Invalid email.":"This field is required.");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.enterPassword=function(e){var t=j.checkPassword(e.target.value);e.target.setCustomValidity(e.target.value?t.isStrong?"":"Please choose a stronger password. Try a mix of letters, numbers, and symbols (use 8 or more characters).":"This field is required."),document.querySelector("meter").value=t.level,r.setState({strength:t.strength})},r.enterConfirm=function(e){return e.target.setCustomValidity(e.target.value?e.target.value===r.state.password?"":"The passwords do not match.":"This field is required.")},r.chooseDateOfBirth=function(e){document.querySelector("#dayRegister").setCustomValidity(j.isDate("yearRegister"===e.target.id?e.target.value:r.state.year,"monthRegister"===e.target.id?e.target.value:r.state.month,"dayRegister"===e.target.id?e.target.value:r.state.day)?"":"Invalid date of birth."),document.querySelector("#yearRegister").setCustomValidity((new Date).getFullYear()-parseInt("yearRegister"===e.target.id?e.target.value:r.state.year)>=5?"":"You must be 5 years or older")},r.chooseSex=function(){return document.querySelector("#female-register").setCustomValidity(r.state.sex?"":"Please select one of these options")},r.getIsValidDateOfBirth=function(){return(r.state.submitted||r.state.day!==(new Date).getDate().toString()||r.state.month!==(new Date).getMonth().toString()||r.state.year!==(new Date).getFullYear().toString())&&(j.isDate(r.state.year,r.state.month,r.state.day)&&j.isOldEnough(r.state.year)?"is-valid":"is-invalid")},r.onSubmit=function(e){e.preventDefault(),r.setState({submitted:!0}),r.state.password===r.state.confirm&&r.state.firstName&&r.state.lastName&&r.state.email&&r.state.password&&r.state.confirm&&r.state.day&&r.state.month&&r.state.year&&(document.querySelector("#female-register").setCustomValidity(r.state.sex?"":"Please select one of these options"),document.querySelector("#yearRegister").setCustomValidity(j.isOldEnough(r.state.year)?"":"You must be 5 years or older"),D.create(r.state).then((function(e){alert(e.data.msg),document.querySelector(".form-register").reset(),document.querySelector("meter").value=0,r.setState(q)})))},r.componentDidUpdate=function(){return window.onbeforeunload=function(){return!!(r.state.firstName||r.state.lastName||r.state.email||r.state.password||r.state.day||r.state.month||r.state.year||r.state.sex)||void 0}},r.render=function(){var e=Object.freeze({FEMALE:"female",MALE:"male",OTHER:"other"});return Object(F.jsx)("section",{className:"section-register",children:Object(F.jsxs)("form",{className:"form-register",onSubmit:r.onSubmit,children:[Object(F.jsx)("button",{className:"close",type:"reset",onClick:r.props.close,children:Object(F.jsx)("i",{className:"material-icons",children:"close"})}),Object(F.jsx)("h1",{className:"h1-register",children:"Sign Up"}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsxs)("div",{className:"form-floating col-md-6 ".concat(r.state.firstName&&"float"),children:[Object(F.jsx)("input",{className:"form-control ".concat(r.state.firstName&&(j.isFirstName(r.state.firstName)?"is-valid":"is-invalid")),id:"firstNameRegister",type:"text",pattern:j.firstNamePattern,onInput:r.enterFirstName,onInvalid:r.enterFirstName,onChange:r.setFirstName,required:!0}),Object(F.jsx)("label",{htmlFor:"firstNameRegister",children:"First name"})]}),Object(F.jsxs)("div",{className:"form-floating col-md-6 ".concat(r.state.lastName&&"float"),children:[Object(F.jsx)("input",{className:"form-control ".concat(r.state.lastName&&(j.isLastName(r.state.lastName)?"is-valid":"is-invalid")),id:"lastNameRegister",type:"text",pattern:j.lastNamePattern,onInput:r.enterLastName,onInvalid:r.enterLastName,onChange:r.setLastName,required:!0}),Object(F.jsx)("label",{htmlFor:"lastNameRegister",children:"Last name"})]})]}),Object(F.jsxs)("div",{className:"form-floating ".concat(r.state.email&&"float"),children:[Object(F.jsx)("input",{className:"form-control ".concat(r.state.email&&(j.isEmail(r.state.email)&&!r.state.available?"is-valid":"is-invalid")),id:"addressRegister",type:"email",pattern:j.emailPattern,onInput:r.enterEmail,onInvalid:r.enterEmail,onChange:r.setEmail,required:!0}),Object(F.jsx)("label",{htmlFor:"addressRegister",children:"Email"})]}),Object(F.jsxs)("div",{className:"form-row",children:[Object(F.jsxs)("div",{className:"form-floating col-md-6 ".concat(r.state.password&&"float"," form-floating-password"),children:[Object(F.jsx)("input",{className:"form-control ".concat(r.state.password&&(j.checkPassword(r.state.password).isStrong?"is-valid":"is-invalid")),id:"passwordRegister",type:"password",minLength:"8",onInput:r.enterPassword,onChange:r.setPassword,required:!0}),Object(F.jsx)("label",{htmlFor:"passwordRegister",children:"Password"})]}),Object(F.jsxs)("div",{className:"form-floating col-md-6 ".concat(r.state.confirm&&"float"," form-floating-confirm"),children:[Object(F.jsx)("input",{className:"form-control ".concat(r.state.confirm&&(r.state.confirm===r.state.password?"is-valid":"is-invalid")),id:"confirmRegister",type:"password",onInput:r.enterConfirm,onInvalid:r.enterConfirm,onChange:r.setConfirm,required:!0}),Object(F.jsx)("label",{htmlFor:"confirmRegister",children:"Confirm"})]})]}),Object(F.jsx)("meter",{id:"passwordStrengthRegister",title:"Use 8 or more characters with a mix of letters, numbers & symbols",max:"4",value:"0"}),Object(F.jsx)("div",{className:"form-group-password-strength",children:r.state.strength&&Object(F.jsx)("label",{className:"password-strength",htmlFor:"passwordStrengthRegister",children:j.checkPassword(r.state.password).strength})}),Object(F.jsx)("label",{className:"label-group ".concat(r.getIsValidDateOfBirth()),htmlFor:"dateOfBirthRegister",children:"Date of birth"}),Object(F.jsxs)("div",{className:"form-row",id:"dateOfBirthRegister",children:[Object(F.jsxs)("div",{className:"form-floating col-md-4 ".concat(r.state.day&&"float"),children:[Object(F.jsx)("select",{className:"form-control-day ".concat(r.getIsValidDateOfBirth()),id:"dayRegister",required:!0,value:r.state.day,onInput:r.chooseDateOfBirth,onChange:r.setDay,children:"0".repeat(31).split("").map((function(e,t){return Object(F.jsx)("option",{value:t+1,children:t+1},t)}))}),Object(F.jsx)("label",{htmlFor:"dayRegister",children:"Day"})]}),Object(F.jsxs)("div",{className:"form-floating col-md-4 ".concat(r.state.month&&"float"),children:[Object(F.jsx)("select",{className:"form-control-month ".concat(r.getIsValidDateOfBirth()),id:"monthRegister",required:!0,value:r.state.month,onInput:r.chooseDateOfBirth,onChange:r.setMonth,children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((function(e,t){return Object(F.jsx)("option",{value:t,children:e},t)}))}),Object(F.jsx)("label",{htmlFor:"monthRegister",children:"Month"})]}),Object(F.jsxs)("div",{className:"form-floating col-md-4 ".concat(r.state.year&&"float"),children:[Object(F.jsx)("select",{className:"form-control-year ".concat(r.getIsValidDateOfBirth()),id:"yearRegister",required:!0,"aria-describedby":"validationDateOfBirth",onInput:r.chooseDateOfBirth,onChange:r.setYear,children:"0".repeat(200).split("").map((function(e,t){return Object(F.jsx)("option",{value:(new Date).getFullYear()-t,children:(new Date).getFullYear()-t},t)}))}),Object(F.jsx)("label",{htmlFor:"yearRegister",children:"Year"})]})]}),Object(F.jsx)("label",{className:"label-group ".concat(r.state.sex?"is-valid":r.state.submitted&&!r.state.sex&&"is-invalid"),htmlFor:"genderRegister",children:"Gender"}),Object(F.jsxs)("div",{className:"form-row",id:"genderRegister",children:[Object(F.jsx)("div",{className:"form-group col-md-4",children:Object(F.jsxs)("div",{className:"form-check-female ".concat(r.state.sex?"is-valid":r.state.submitted&&!r.state.sex&&"is-invalid"),onClick:r.checkSex,children:[Object(F.jsx)("label",{className:"form-check-label flex-fill",htmlFor:"female-register",children:"Female"}),Object(F.jsx)("input",{className:"form-check-input is-valid",id:"female-register",type:"radio",name:"sex",value:e.FEMALE,checked:r.state.sex===e.FEMALE,onInput:r.chooseSex,onChange:r.setSex})]})}),Object(F.jsx)("div",{className:"form-group col-md-4",children:Object(F.jsxs)("div",{className:"form-check-male ".concat(r.state.sex?"is-valid":r.state.submitted&&!r.state.sex&&"is-invalid"),onClick:r.checkSex,children:[Object(F.jsx)("label",{className:"form-check-label flex-fill",htmlFor:"male-register",children:"Male"}),Object(F.jsx)("input",{className:"form-check-input",id:"male-register",type:"radio",name:"sex",value:e.MALE,checked:r.state.sex===e.MALE,onInput:r.chooseSex,onChange:r.setSex})]})}),Object(F.jsx)("div",{className:"form-group col-md-4",children:Object(F.jsxs)("div",{className:"form-check-other ".concat(r.state.sex?"is-valid":r.state.submitted&&!r.state.sex&&"is-invalid"),onClick:r.checkSex,children:[Object(F.jsx)("label",{className:"form-check-label flex-fill",htmlFor:"other-register",children:"Other"}),Object(F.jsx)("input",{className:"form-check-input",id:"other-register",type:"radio",name:"sex",value:e.OTHER,checked:r.state.sex===e.OTHER,onInput:r.chooseSex,onChange:r.setSex})]})})]}),Object(F.jsx)("div",{className:"form-row-sign-up",children:Object(F.jsx)("button",{className:"btn-sign-up",type:"submit",children:"Sign up"})})]})})},r.setFirstName=r.setFirstName.bind(Object(h.a)(r)),r.setLastName=r.setLastName.bind(Object(h.a)(r)),r.setEmail=r.setEmail.bind(Object(h.a)(r)),r.setPassword=r.setPassword.bind(Object(h.a)(r)),r.setConfirm=r.setConfirm.bind(Object(h.a)(r)),r.setDay=r.setDay.bind(Object(h.a)(r)),r.setMonth=r.setMonth.bind(Object(h.a)(r)),r.setYear=r.setYear.bind(Object(h.a)(r)),r.setSex=r.setSex.bind(Object(h.a)(r)),r.state=q,r}return a}(r.Component),M="".concat("https://clouddrive16.herokuapp.com/","code/"),B=new function e(){Object(i.a)(this,e),this.create=function(){return k.post(M)}},L={email:"",password:"",remembered:!1,available:!1,visible:!1,opened:!1},A=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).setEmail=function(e){return r.setState({email:e.target.value})},r.setPassword=function(e){return r.setState({password:e.target.value})},r.setRemembered=function(e){return r.setState({remembered:e.target.checked})},r.enterEmail=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,R.available(t.target.value);case 3:a=e.sent.data.available,t.target.setCustomValidity(j.isEmail(t.target.value)?a?"":"Email not registered":"Invalid email!"),r.setState({available:a,visible:!1,password:""}),setTimeout((function(){document.querySelector(".form-group-password")&&(document.querySelector(".form-group-password").style.height=0),document.querySelector(".input-email").style.width="260px"}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.open=function(){return r.setState({opened:!0})},r.close=function(){return r.setState({opened:!1})},r.onSubmit=function(e){e.preventDefault(),r.state.email&&(r.setState({visible:!0}),setTimeout((function(){document.querySelector(".form-group-password").style.height="39px",document.querySelector(".input-email").style.width="315px",document.querySelector(".input-password").focus(),r.state.password&&R.authenticate(r.state).then((function(e){r.state.remembered?localStorage.setItem("remembered",r.state.remembered):sessionStorage.setItem("remembered",r.state.remembered),j.setToken(e.data.token),r.setState(L),j.getPayload().activated||(alert("Your session exists for 5 minutes."),B.create()),window.location.reload()}))})))},r.componentDidUpdate=function(){return window.onbeforeunload=function(){return!(!r.state.email&&!r.password)||void 0}},r.render=function(){return Object(F.jsxs)("section",{className:"section-only",children:[Object(F.jsxs)("form",{className:"form-only",onSubmit:r.onSubmit,children:[Object(F.jsx)("img",{className:"logo-img",src:"/logo.png",alt:"CloudDrive16 logo"}),Object(F.jsxs)("h1",{className:"h1-only",children:["Sign in to ","CloudDrive16"]}),Object(F.jsxs)("div",{className:"form-group-email ".concat(r.state.visible?"rounded-top":"rounded"),children:[Object(F.jsx)("input",{className:"input-email",type:"email",name:"email",placeholder:"Email",value:r.state.email,pattern:j.emailPattern,onInput:r.enterEmail,onInvalid:r.enterEmail,onChange:r.setEmail,title:"Please fill out this field.",required:!0}),!r.state.visible&&Object(F.jsx)("button",{className:"btn-input",type:"submit",disabled:!r.state.email,hidden:!0,children:Object(F.jsx)("i",{className:"material-icons",children:"input"})})]}),Object(F.jsx)("div",{className:"form-group-container",children:r.state.visible&&r.state.email&&Object(F.jsxs)("div",{className:"form-group-password",children:[Object(F.jsx)("input",{className:"input-password",type:"password",name:"password",placeholder:"Password",value:r.state.password,onChange:r.setPassword,required:!0}),Object(F.jsx)("button",{className:"btn-input",type:"submit",disabled:!r.state.password,children:Object(F.jsx)("i",{className:"material-icons",children:"input"})})]})}),Object(F.jsxs)("div",{className:"form-check-remember",children:[Object(F.jsx)("input",{className:"remember-me-input",id:"remember-me",type:"checkbox",name:"remember-me",value:r.state.remembered,onChange:r.setRemembered}),Object(F.jsx)("label",{className:"remember-me-label",htmlFor:"remember-me",children:"Keep me signed in"})]}),Object(F.jsxs)("a",{href:"/find-account",target:"_blank",rel:"noopener noreferrer",children:["Forgotten password? ",Object(F.jsx)("i",{className:"fas fa-external-link-alt"})]}),Object(F.jsx)("button",{className:"btn-create-account",type:"button",onClick:r.open,children:"Create New Account"})]}),r.state.opened&&Object(F.jsx)(T,{close:r.close})]})},r.setEmail=r.setEmail.bind(Object(h.a)(r)),r.setPassword=r.setPassword.bind(Object(h.a)(r)),r.setRemembered=r.setRemembered.bind(Object(h.a)(r)),r.state=L,r}return a}(r.Component),_=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).getIndex=function(e){return Array.from(document.querySelector(".form-row").children).findIndex((function(t){return t===e}))},e.getInput=function(){return document.querySelectorAll(".form-control-digit")},e.select=function(e){return e.target.select()},e.enterNumber=function(t){var a=[e.getIndex(t.target.closest(".form-group")),e.getInput()],r=a[0],n=a[1];if(t.target.value.length>1)return n[r].value=t.target.value[0];r<5&&j.isDigit(n[r].value)&&1===n[r].value.length&&n[r+1].focus(),e.isSubmit()&&e.onSubmit(t)},e.clearNumber=function(t){var a=[e.getIndex(t.target.closest(".form-group")),e.getInput()],r=a[0],n=a[1];8===t.keyCode&&r>0&&""===t.target.value&&n[r-1].focus()},e.pasteNumber=function(t){var a=[e.getIndex(t.target.closest(".form-group")),e.getInput()],r=a[0],n=a[1],s=(t.clipboardData||window.clipboardData).getData("text"),o=s.length>6-r?6-r:s.length,i=o+r>5?5:o+r;setTimeout((function(){n[r].value=j.isDigit(s[0])?s[0]:null,j.isDigits(s)&&n[i].focus()}));for(var c=r,l=0;l<o;c++,l++)n[c].value=j.isDigit(s[l])?s[l]:null;e.isSubmit()&&e.onSubmit(t)},e.send=function(e){e.preventDefault(),B.create().then((function(e){return alert(e.data.msg)}))},e.isSubmit=function(){return 6==="0".repeat(6).split("").map((function(e,t){return document.querySelectorAll(".form-control-digit")[t].value})).filter((function(e){return j.isDigit(e)})).length},e.onSubmit=function(e){e.preventDefault(),R.verify({content:Array.from(document.querySelectorAll(".form-control-digit")).map((function(e){return e.value})).join("")}).then((function(e){j.setToken(e.data.token),window.location.reload()})).catch((function(){document.querySelector(".form-only").reset(),document.querySelector(".form-control-digit").focus()}))},e.render=function(){return Object(F.jsx)("section",{className:"section-only",children:Object(F.jsxs)("form",{className:"form-only",onSubmit:e.onSubmit,children:[Object(F.jsx)("img",{className:"logo-img",src:"/logo.png",alt:"CloudDrive16 logo"}),Object(F.jsx)("h1",{className:"h1-only",children:"Activate your account"}),Object(F.jsx)("p",{children:"We sent a code to your email. Please enter the verification code."}),Object(F.jsx)("div",{className:"form-row",children:"0".repeat(6).split("").map((function(t,a){return Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("input",{className:"form-control-digit",type:"number",maxLength:"1",onClick:e.select,onInput:e.enterNumber,onDrop:e.enterNumber,onKeyUp:e.clearNumber,onKeyDown:e.clearNumber,onPaste:e.pasteNumber,required:!0})},a)}))}),Object(F.jsx)("a",{href:"/",onClick:e.send,children:"Resend Code"})]})})},e}return a}(r.Component),Q="".concat("https://clouddrive16.herokuapp.com/","folder/"),V=new function e(){Object(i.a)(this,e),this.create=function(e){return k.post(Q,e)},this.read=function(e){return k.get("".concat(Q).concat(e))},this.update=function(e,t){return k.put("".concat(Q).concat(e),t)},this.delete=function(e){return k.patch("".concat(Q).concat(e))},this.restore=function(e){return k.patch("".concat(Q,"r/").concat(e))},this.deleteForever=function(e){return k.delete("".concat(Q).concat(e))}},Y="".concat("https://clouddrive16.herokuapp.com/","folders/"),U=new function e(){Object(i.a)(this,e),this.read=function(){return k.get(Y)}},z="".concat("https://clouddrive16.herokuapp.com/","file/"),H=new function e(){Object(i.a)(this,e),this.create=function(e){return k.post(z,e)},this.read=function(e){return k.get("".concat(z).concat(e))},this.update=function(e,t){return k.put("".concat(z).concat(e),t)},this.delete=function(e){return k.patch("".concat(z).concat(e))},this.restore=function(e){return k.patch("".concat(z,"r/").concat(e))},this.deleteForever=function(e){return k.delete("".concat(z).concat(e))}},J="".concat("https://clouddrive16.herokuapp.com/","files/"),K=new function e(){Object(i.a)(this,e),this.create=function(e){return k.post(J,e)},this.read=function(){return k.get(J)}},$=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).return=function(){j.deleteQuery("location"),r.setState({location:""})},r.setTrash=function(){j.setQuery("location","trash"),r.setState({location:"trash"})},r.save=function(e){var t=new FormData,a=[];t.append("path",r.state.path),Array.from(e.target.files).forEach((function(e){return a.push(e.name)&&t.append("files",e,e.name)})),t.append("names",JSON.stringify(a)),K.create(t)},r.upload=function(){return document.getElementById("files").click()},r.download=function(){return window.location.href="https://clouddrive16.herokuapp.com/file/d/"+j.getId()},r.create=function(){return V.create({name:prompt("Create folder","New folder"),path:r.state.path})},r.open=function(e){var t=r.state.folders.find((function(t){return t._id===e.target.closest(".li-folder").id}));r.setState({path:("/"===r.state.path?r.state.path:r.state.path+"/")+t.name}),j.setQuery("id",t._id)},r.rename=function(){return"folder"===j.getType()?V.read(j.getId()).then((function(e){return V.update(j.getId(),{name:prompt("Rename folder",e.data.folder.name)})&&setTimeout((function(){return window.location.reload()}),1e3)})):H.read(j.getId()).then((function(e){return H.update(j.getId(),{name:prompt("Rename file",e.data.file.name)})&&setTimeout((function(){return window.location.reload()}),1e3)}))},r.delete=function(){return"folder"===j.getType()?"trash"===j.getQuery("location")?V.deleteForever(j.getId()):V.delete(j.getId()):"trash"===j.getQuery("location")?H.deleteForever(j.getId()):H.delete(j.getId())},r.restore=function(){return"folder"===j.getType()?V.restore(j.getId()):H.restore(j.getId())},r.choose=function(e){e.preventDefault(),r.getMenuFolder().style.display="block",r.getMenuFolder().style.top="".concat(e.clientY,"px"),r.getMenuFolder().style.left="".concat(e.clientX,"px"),j.setId(e.target.closest(/file|img/g.test(e.target.className)?".li-file":/folder/g.test(e.target.className)?".li-folder":null).id),j.setType(/file/g.test(e.target.className)?"file":/folder/g.test(e.target.className)?"folder":null),document.querySelector(".dropdown-item-dowload").style.setProperty("display",/folder/g.test(e.target.className)?"none":"flex","important")},r.clickOut=function(e){return r.getMenuFolder().style.display="none"},r.getMenuFolder=function(){return document.querySelector(".dropdown-menu-folder")},r.access=function(e){var t=Number.parseInt(e.target.id),a=1===t?"/":r.state.path.split("/").slice(0,t).join("/"),n=r.state.folders.find((function(e){return e.path===a}));r.setState({path:a||"/"}),j.setQuery("id",0===Number.parseInt(e.target.id)?"root":n._id)},r.componentDidMount=function(){j.loggedIn()&&D.read().then((function(e){return r.setState({fullName:e.data.user.fullName})})),window.location.search||(window.location.search="id=root")},r.componentDidUpdate=function(){U.read().then((function(e){var t=e.data.folders.filter((function(e){return"trash"===j.getQuery("location")?e.inTrash:!e.inTrash})),a="root"===j.getQuery("id")?{path:"/",name:""}:e.data.folders.find((function(e){return e._id===j.getQuery("id")})),n=""===a.name?"/":"/"===a.path?a.path+a.name:a.path+"/"+a.name;r.setState({folders:t,items:t.filter((function(e){return e.path===n})),path:n}),K.read().then((function(e){var t=e.data.files.filter((function(e){return"trash"===j.getQuery("location")?e.inTrash:!e.inTrash}));r.setState({files:t,itemFiles:t.filter((function(e){return e.path===n}))})}))}))},r.render=function(){return Object(F.jsxs)("section",{className:"section-files",onClick:r.clickOut,children:[Object(F.jsxs)("ul",{className:"dropdown-menu-folder",children:[Object(F.jsxs)("li",{className:"dropdown-item-dowload",onClick:r.download,children:[Object(F.jsx)("i",{className:"material-icons",children:"file_download"}),"Download"]}),Object(F.jsxs)("li",{className:"dropdown-item-rename",onClick:r.rename,children:[Object(F.jsx)("i",{className:"material-icons",children:"drive_file_rename_outline"}),"Rename"]}),"trash"===j.getQuery("location")&&Object(F.jsxs)("li",{className:"dropdown-item-restore",onClick:r.restore,children:[Object(F.jsx)("i",{className:"material-icons",children:"restore"}),"Restore"]}),Object(F.jsxs)("li",{className:"dropdown-item-delete",onClick:r.delete,children:[Object(F.jsx)("i",{className:"material-icons",children:"trash"===j.getQuery("location")?"delete_forever":"delete"}),"Delete ","trash"===j.getQuery("location")&&"forever"]})]}),Object(F.jsxs)("nav",{className:"left-nav col-2",id:"leftNav",children:[Object(F.jsx)("div",{className:"top-left-nav",children:Object(F.jsx)("label",{htmlFor:"leftNav",children:Object(F.jsx)("strong",{children:r.state.fullName})})}),Object(F.jsxs)("ul",{className:"list-group",children:[Object(F.jsxs)("li",{className:"list-group-item-files ".concat(!r.state.location&&"active"),onClick:r.return,children:[Object(F.jsx)("i",{className:"material-icons",children:"folder"})," My files"]}),Object(F.jsxs)("li",{className:"list-group-item-trash ".concat("trash"===r.state.location&&"active"),onClick:r.setTrash,children:[Object(F.jsx)("i",{className:"material-icons",children:"delete"})," Trash"]})]})]}),Object(F.jsxs)("div",{className:"right-content col-10",children:[Object(F.jsxs)("div",{className:"command-bar shadow-sm",children:[Object(F.jsxs)("button",{className:"btn-new-folder",onClick:r.create,children:[Object(F.jsx)("i",{className:"material-icons",children:"create_new_folder"})," New"]}),Object(F.jsx)("input",{type:"file",id:"files",hidden:!0,onChange:r.save}),Object(F.jsxs)("button",{className:"btn-new-folder",onClick:r.upload,children:[Object(F.jsx)("i",{className:"material-icons",children:"publish"})," Upload"]})]}),Object(F.jsx)("div",{className:"path-bar",children:"/"===r.state.path?Object(F.jsx)("strong",{children:"My files"}):r.state.path.split("/").map((function(e,t,a){return Object(F.jsx)("div",{children:0===t?Object(F.jsxs)("div",{className:"dir",children:[Object(F.jsx)("p",{className:"dir-parent",id:t,onClick:r.access,children:"My files"}),Object(F.jsx)("p",{children:"\xa0>\xa0"})]}):t===a.length-1?Object(F.jsx)("p",{children:Object(F.jsx)("strong",{children:e})}):Object(F.jsxs)("div",{className:"dir",children:[Object(F.jsx)("p",{className:"dir-parent",id:t,onClick:r.access,children:e}),Object(F.jsx)("p",{children:"\xa0>\xa0"})]})},t)}))}),Object(F.jsxs)("ul",{className:"ls-folder",children:[r.state.items.map((function(e,t,a){return a.length?Object(F.jsxs)("li",{className:"li-folder",id:e._id,onClick:r.open,onContextMenu:r.choose,children:[Object(F.jsx)("img",{className:"bg-folder",src:"svg/lg-bg.svg",alt:"background folder"}),j.isImages(r.state.files,e)?Object(F.jsx)("img",{className:"img",src:"".concat("https://clouddrive16.herokuapp.com/images/?image=").concat(j.getPayload()._id,"/files/").concat(j.getImage(r.state.files,e).path,"/").concat(j.getImage(r.state.files,e).name),alt:"forceground folder"}):Object(F.jsx)("div",{className:"file"}),j.isImages(r.state.files,e)?Object(F.jsx)("img",{className:"fg-folder",src:"svg/lg-fg-media.svg",alt:"forceground folder",onContextMenu:r.choose}):Object(F.jsx)("img",{className:"fg-folder",src:"svg/lg-fg.svg",alt:"forceground folder"}),Object(F.jsx)("label",{className:"label-folder",htmlFor:"folder".concat(t),children:e.name})]},t):Object(F.jsx)("li",{children:"This folder is empty"})})),r.state.itemFiles.map((function(e,t,a){return Object(F.jsxs)("li",{className:"li-file",id:e._id,onContextMenu:r.choose,children:[j.isImage(e.name)?Object(F.jsx)("img",{className:"bg-img",src:"".concat("https://clouddrive16.herokuapp.com/images/?image=").concat(j.getPayload()._id,"/files/").concat(e.path,"/").concat(e.name),alt:"Img ".concat(t)}):Object(F.jsx)("i",{className:"material-icons bg-file",children:"description"}),Object(F.jsx)("label",{className:"label-file",htmlFor:"folder".concat(t),children:e.name})]},t)}))]})]})]})},r.state={fullName:"",location:"",opened:!1,path:"/",name:"",folder:{_id:"root",path:"/",name:"root"},folders:[],items:[],file:null,ready:!1,files:[],itemFiles:[]},r}return a}(r.Component),W=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).render=function(){return Object(F.jsx)("main",{children:j.loggedIn()?j.getPayload().activated?Object(F.jsx)($,{}):Object(F.jsx)(_,{}):Object(F.jsx)(A,{})})},e}return a}(r.Component),Z={email:""},G=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).onSubmit=function(e){e.preventDefault()},r.render=function(){return Object(F.jsx)("main",{children:Object(F.jsx)("section",{className:"section-only",children:Object(F.jsxs)("form",{className:"form-only",onSubmit:r.onSubmit,children:[Object(F.jsx)("img",{className:"logo-img",src:"/logo.png",alt:"CloudDrive16 logo"}),Object(F.jsx)("h1",{className:"h1-only",children:"Find my account"}),Object(F.jsxs)("div",{className:"form-group-email",children:[Object(F.jsx)("input",{className:"input-email",type:"email",name:"email",placeholder:"Email",value:r.state.email,pattern:j.emailPattern,onInput:r.enterEmail,onInvalid:r.enterEmail,onChange:r.setEmail,title:"Please fill out this field.",required:!0}),Object(F.jsx)("button",{className:"btn-input",type:"submit",disabled:!r.state.email,hidden:!0,children:Object(F.jsx)("i",{className:"material-icons",children:"input"})})]})]})})})},r.state=Z,r}return a}(r.Component),X=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).render=function(){return Object(F.jsxs)(d.a,{children:[Object(F.jsx)(E,{}),Object(F.jsx)(u.a,{exact:!0,path:"/",component:W}),Object(F.jsx)(u.a,{path:"/find-account",component:G})]})},e}return a}(r.Component),ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,117)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),s(e),o(e)}))};o.a.render(Object(F.jsx)(n.a.StrictMode,{children:Object(F.jsx)(X,{})}),document.getElementById("root")),ee()},69:function(e,t,a){},70:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.733f90ac.chunk.js.map