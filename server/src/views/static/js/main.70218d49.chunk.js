(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(29),i=n.n(r),o=(n(73),n(5)),c=n(9),l=n(8),d=(n(74),n(67)),u=n(7),m=n(22),h=n(118),f=n(121),p=n(122),g=n(119),j=n(62),b=n(63),v=n.n(b),x=new(function(){function e(){var t=this;Object(o.a)(this,e),this.isFirstName=function(e){return RegExp(t.firstNamePattern).test(e)},this.isLastName=function(e){return RegExp(t.lastNamePattern).test(e)},this.isEmail=function(e){return RegExp(t.emailPattern).test(e)},this.isDate=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date(parseInt(t)+1+"/"+n+"/"+e);return a.getFullYear()===parseInt(e)&&a.getMonth()===parseInt(t)&&a.getDate()===parseInt(n)},this.isOldEnough=function(e){return(new Date).getFullYear()-parseInt(e)>=5},this.isDigit=function(e){return/^\d{1}$/.test(e)},this.isDigits=function(e){return/^\d+$/.test(e)},this.toPath=function(e){return(null===e||void 0===e?void 0:e.path)+(null===e||void 0===e?void 0:e.name)+"/"},this.isImage=function(e){return/\.(apng|avif|gif|jpe?g|jpe|jf?if|pjp(eg)?|png|webp|bmp|ico|cur)$/i.test(e)},this.getImage=function(e,n){return e.find((function(e){return e.path===t.toPath(n)&&t.isImage(e.name)}))},this.isVideo=function(e){return/\.(3gp|mp4|m4v|m4p|ogv|ogg|mov|webm)$/i.test(e)},this.isVideos=function(e,n){return e.filter((function(e){return e.path===t.toPath(n)&&t.isVideo(e.name)})).length},this.getVideo=function(e,n){return e.find((function(e){return e.path===t.toPath(n)&&t.isVideo(e.name)}))},this.isAudio=function(e){return/\.(aac|flac|mp3|m4a|oga|wav)$/i.test(e)},this.isMedia=function(e){return t.isImage(e)||t.isVideo(e)||t.isAudio(e)},this.isPDF=function(e){return/\.pdf$/i.test(e)},this.isImages=function(e,n){return e.filter((function(e){return e.path===t.toPath(n)&&t.isImage(e.name)})).length},this.isEmpty=function(e,n,a){return!e.filter((function(e){return e.path===t.toPath(a)})).length&&!n.filter((function(e){return e.path===t.toPath(a)})).length},this.checkPassword=function(e){var t=0,n=Object.freeze({0:"Worst",1:"Bad",2:"Weak",3:"Good",4:"Strong"});return e.length>=8&&t++,/[a-z]/gi.test(e)&&t++,/\d/g.test(e)&&t++,/[.@#$%^&*(),.?":{}|<>]/g.test(e)&&t++,{isStrong:4===t,level:t,strength:n[t]}},this.getQuery=function(e){return new URLSearchParams(window.location.search).get(e)},this.setQuery=function(e,t){var n=new URLSearchParams(window.location.search);n.set(e,t),window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname,"?").concat(n)))},this.deleteQuery=function(e){var t=new URLSearchParams(window.location.search);t.delete(e),window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname,"?").concat(t)))},this.setCookies=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.entries(e).map((function(e){return document.cookie=e[0]+"="+e[1]+(t?"; Max-Age="+t:"")}))},this.deleteCookie=function(e){return document.cookie=e+"= Max-Age=0"},this.clearCookies=function(){return document.cookie.split(" ").map((function(e){return e.split("=")})).forEach((function(e){return document.cookie=e[0]+"=; Max-Age=0"}))},this.getToken=function(){return localStorage.getItem("token")||sessionStorage.getItem("token")},this.setToken=function(e){return t.remembered()?localStorage.setItem("token",e):sessionStorage.setItem("token",e)},this.getPayload=function(){return t.isLogin()?JSON.parse(atob(t.getToken().split(".")[1])):null},this.isExpired=function(){return!t.isLogin()||!!t.getPayload().exp&&1e3*t.getPayload().exp<Date.now()},this.isLogin=function(){return!!t.getCookie("id")},this.remembered=function(){return"true"===localStorage.getItem("remembered")||"true"===sessionStorage.getItem("remembered")||"false"!==localStorage.getItem("remembered")&&"false"!==sessionStorage.getItem("remembered")&&null},this.logout=function(){localStorage.clear(),sessionStorage.clear(),window.location.reload()},this.firstNamePattern="^[A-Z]{1}[a-z]*$",this.lastNamePattern="^[A-Z]{1}[a-z]*(?: [A-Z]{1}[a-z]*)*(?: [A-Z]{1}[a-z]*)?$",this.emailPattern="[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"}return Object(j.a)(e,[{key:"downloadBlob",value:function(e,t){var n=URL.createObjectURL(new Blob([e],{type:"".concat(v.a.lookup(t))})),a=document.createElement("a");a.href=n,a.download=t||"download",a.click()}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var s=n[a];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null}},{key:"setCookie",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a="";if(n){var s=new Date;s.setTime(s.getTime()+n),a="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/"}}]),e}()),y=n(64),O=n.n(y).a.create({withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});O.interceptors.response.use((function(e){return e}),(function(e){var t,n,a,s;return e.response?alert("object"===typeof(null===(t=e.response)||void 0===t?void 0:t.data)?JSON.stringify(null===(n=e.response)||void 0===n?void 0:n.data):(null===(a=e.response)||void 0===a?void 0:a.data)||(null===(s=e.response)||void 0===s?void 0:s.statusText))||(401===e.response.status?window.location.href="/":501===e.response.status&&window.location.reload()):console.error(e),Promise.reject(e)}));var w=O,N="".concat(window.location.origin+"/api","/auth/"),S=new function e(){Object(o.a)(this,e),this.login=function(e){return w.post(N,e)},this.available=function(e){return w.get("".concat(N).concat(e))},this.verify=function(e){return w.put(N,e)},this.logout=function(){return w.delete(N)}},k="".concat(window.location.origin+"/api","/folders/"),C=new function e(){Object(o.a)(this,e),this.create=function(e){return w.post(k,e)},this.update=function(e,t){return w.put("".concat(k).concat(e),t)},this.delete=function(e){return w.patch("".concat(k).concat(e))},this.restore=function(e){return w.patch("".concat(k,"r/").concat(e))},this.move=function(e,t){return w.patch("".concat(k,"m/").concat(e),t)},this.copy=function(e,t){return w.patch("".concat(k,"c/").concat(e),t)},this.deleteForever=function(e){return w.delete("".concat(k).concat(e))},this.list=function(e){return w.get(e?"".concat(k,"?name=").concat(e):k)}},_="".concat(window.location.origin+"/api","/files/"),F=new function e(){Object(o.a)(this,e),this.create=function(e){return w.post(_,e)},this.read=function(e){return w.get("".concat(_).concat(e))},this.update=function(e,t){return w.put("".concat(_).concat(e),t)},this.delete=function(e){return w.patch("".concat(_).concat(e))},this.restore=function(e){return w.patch("".concat(_,"r/").concat(e))},this.move=function(e,t){return w.patch("".concat(_,"m/").concat(e),t)},this.copy=function(e,t){return w.patch("".concat(_,"c/").concat(e),t)},this.deleteForever=function(e){return w.delete("".concat(_).concat(e))},this.list=function(e){return w.get(e?"".concat(_,"?name=").concat(e):_)}},I=n(0),D=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).toggle=function(){return a.setState({isHover:!a.state.isHover})},a.toggleDropdown=function(){return a.setState({dropdownOpened:!a.state.dropdownOpened})},a.getSearchBar=function(){return document.querySelector(".search-bar")},a.getSearchIn=function(){return document.querySelector(".input-search")},a.getSearchBtn=function(){return document.querySelector(".btn-search")},a.open=function(){a.state.width<801&&(a.getSearchBar().style.position="absolute",a.getSearchBar().style.width="100%",a.getSearchBar().style.left="0",a.getSearchBar().style.background="white",a.getSearchIn().style.display="block",a.getSearchIn().focus(),a.getSearchBtn().style.color="blue",a.setState({opened:!0}))},a.reset=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.getSearchBar().style.width=e?"auto":(a.state.width<1025?250:500)+"px",a.getSearchBar().style.position="static",a.getSearchBar().style.background=e?"blue":"#e1dfdd",a.getSearchBtn().style.color=e?"white":"blue",a.getSearchIn().style.display=e?"none":"flex"},a.coloring=function(e){if("select"===e.type&&a.setState({selected:!0}),"blur"===e.type&&a.setState({selected:!1}),a.state.width>800){var t=a.state.keyword||a.state.selected||"mouseenter"===e.type?"white":"#e1dfdd";"select"===e.type&&(t="white"),"blur"!==e.type||a.state.keyword||(t="#e1dfdd"),document.querySelector(".search-bar").style.background=t}else"mouseleave"===e.type&&(a.reset(),a.setState({opened:!1}))},a.setValue=function(e){return a.setState(Object(m.a)({},e.target.name,e.target.value))},a.logout=function(){return S.logout().then((function(){return window.location.href="/"}))},a.search=function(e){return e.target.value?C.list(e.target.value).then((function(t){return new Promise((function(e){return a.setState({foundFolders:t.data})||e()})).then((function(){return F.list(e.target.value).then((function(e){return a.setState({foundFiles:e.data})}))}))})):a.setState({foundFolders:[],foundFiles:[]})},a.access=function(e){return/folder/g.test(e.target.className)?window.location.href="?id=".concat(e.target.id):/file/g.test(e.target.className)&&(window.location.href="?id=".concat("/"===e.target.value?"root":a.state.folders.find((function(t){return x.toPath(t)===e.target.value}))._id).concat("true"===e.target.getAttribute("data-trash")?"&location=trash":"").concat(x.isMedia(e.target.name)?"&fid=".concat(e.target.id):""))&&x.isPDF(e.target.name)&&window.open("".concat(window.location.origin+"/api","/media/?path=").concat(x.getCookie("id"),"/files").concat("/"===e.target.value?"/":e.target.value+"/").concat(e.target.name))},a.componentDidMount=function(){return x.isLogin()&&C.list().then((function(e){return a.setState({folders:e.data,keyword:x.getQuery("keyword")||""})}))},a.componentDidUpdate=function(){return window.onresize=function(){a.setState({width:window.innerWidth}),a.reset(a.state.width<801),a.state.opened&&a.open()}},a.render=function(){var e,t;return Object(I.jsxs)("header",{children:[Object(I.jsxs)("a",{className:"logo",href:"/",onMouseEnter:a.toggle,onMouseLeave:a.toggle,children:[Object(I.jsx)("img",{className:"logo-img ".concat(a.state.width>560&&"mr-1"),src:"logo.svg",alt:"Logo",hidden:a.state.isHover}),Object(I.jsx)("img",{className:"logo-img ".concat(a.state.width>560&&"mr-1"),src:"logo.hover.svg",alt:"Hover logo",hidden:!a.state.isHover}),a.state.width>560&&"CloudDrive16"]}),x.isLogin()&&Object(I.jsxs)("div",{className:"search-bar",onMouseEnter:a.coloring,onMouseLeave:a.coloring,onInput:a.search,children:[Object(I.jsxs)("form",{className:"form-search",children:[Object(I.jsx)("button",{className:"btn-search",type:a.state.width>800||a.state.opened&&a.state.keyword?"submit":"button",disabled:a.state.width>800&&!a.state.keyword,onClick:a.open,children:Object(I.jsx)("i",{className:"material-icons",children:"search"})}),Object(I.jsx)("input",{className:"input-search",name:"keyword",type:"search",value:a.state.keyword,placeholder:"Search for anything",onSelect:a.coloring,onBlur:a.coloring,onInput:a.setValue})]}),Object(I.jsxs)("div",{className:"list-group-search",children:[null===(e=a.state.foundFolders)||void 0===e?void 0:e.map((function(e,t){return Object(I.jsxs)("button",{type:"button",className:"list-group-item-folder",id:e._id,onClick:a.access,children:[Object(I.jsx)("img",{className:"folder",src:"/svg/folder.svg",alt:"Folder"})," \xa0\xa0",e.name]},t)})),null===(t=a.state.foundFiles)||void 0===t?void 0:t.map((function(e,t){return Object(I.jsxs)("button",{type:"button",className:"list-group-item-file",id:e._id,name:e.name,value:e.path,"data-trash":e.is_trash,onClick:a.access,children:[Object(I.jsx)("i",{className:"material-icons",children:x.isImage(e.name)?"image":x.isVideo(e.name)?"video_file":x.isAudio(e.name)?"audio_file":"description"}),"\xa0\xa0",e.name]},t)}))]})]}),Object(I.jsxs)(h.a,{className:"dropdown-avatar",isOpen:a.state.dropdownOpened,toggle:a.toggleDropdown,children:[x.isLogin()?Object(I.jsx)(f.a,{className:"avatar",title:x.getCookie("first_name"),children:a.state.avatar?Object(I.jsx)("img",{className:"avatar-img",src:a.state.avatar,alt:"".concat(a.state.first_name,"'s avatar")}):"root"===a.state.role?Object(I.jsx)("i",{className:"material-icons",children:"security"}):"admin"===a.state.role?Object(I.jsx)("i",{className:"material-icons",children:"local_police"}):Object(I.jsx)("i",{className:"material-icons",children:"account_circle"})}):Object(I.jsx)("a",{className:"link-help",href:"/help",target:"_blank",children:Object(I.jsx)("i",{className:"material-icons",children:"help_outline"})}),Object(I.jsxs)(p.a,{className:"dropdown-menu-avatar",children:[Object(I.jsxs)(g.a,{className:"dropdown-item-profile",tag:"a",href:"/profile",children:[Object(I.jsx)("p",{className:"text-profile",children:"My profile"}),Object(I.jsx)("i",{className:"material-icons",children:"info"})]}),Object(I.jsx)(g.a,{divider:!0}),Object(I.jsxs)(g.a,{className:"dropdown-item-profile",tag:"a",href:"/help",children:[Object(I.jsx)("p",{className:"text-help",children:"Help"}),Object(I.jsx)("i",{className:"material-icons",children:"help_outline"})]}),Object(I.jsx)(g.a,{divider:!0}),Object(I.jsxs)(g.a,{className:"dropdown-item-logout",onClick:a.logout,children:[Object(I.jsx)("p",{className:"text-logout",children:"Sign out"}),Object(I.jsx)("i",{className:"material-icons",children:"logout"})]})]})]})]})},a.state={avatar:"",folders:[],foundFolders:[],foundFiles:[],isHover:!1,selected:!1,opened:!1,keyword:"",width:window.innerWidth,dropdownOpened:!1},a}return n}(a.Component),P=n(26),M=n.n(P),E=n(31),R=Object.freeze({FEMALE:"Female",MALE:"Male",OTHER:"Other"}),q="".concat(window.location.origin+"/api","/users/"),L=new function e(){Object(o.a)(this,e),this.create=function(e){return w.post(q,e)},this.read=function(){return w.get(q)}},Q={first_name:"",last_name:"",email:"",password:"",confirm:"",day:(new Date).getDate().toString(),month:(new Date).getMonth().toString(),year:(new Date).getFullYear().toString(),sex:"",available:!0,submitted:!1},V=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setValue=function(e){return a.setState(Object(m.a)({},e.target.getAttribute("name"),e.target.value))},a.checkSex=function(e){"form-check-female"!==e.target.className&&"form-check-male"!==e.target.className&&"form-check-other"!==e.target.className||a.setState({sex:Array.from(e.target.children)[1].value})},a.enterFirstName=function(e){return e.target.setCustomValidity(e.target.value?x.isFirstName(e.target.value)?"":"Invalid first name.":"This field is required.")},a.enterLastName=function(e){return e.target.setCustomValidity(e.target.value?x.isLastName(e.target.value)?"":"Invalid last name.":"This field is required.")},a.enterEmail=function(){var e=Object(E.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,S.available(t.target.value);case 3:e.t0=e.sent.status,n=200===e.t0,a.setState({available:n}),t.target.setCustomValidity(t.target.value?x.isEmail(t.target.value)?n?"":"Email is duplicate.":"Invalid email.":"This field is required.");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.enterPassword=function(e){var t=x.checkPassword(e.target.value);e.target.setCustomValidity(e.target.value?t.isStrong?"":"Please choose a stronger password. Try a mix of letters, numbers, and symbols (use 8 or more characters).":"This field is required."),document.querySelector("meter").value=t.level,a.setState({strength:t.strength})},a.enterConfirm=function(e){return e.target.setCustomValidity(e.target.value?e.target.value===a.state.password?"":"The passwords do not match.":"This field is required.")},a.chooseDateOfBirth=function(e){document.querySelector("#dayRegister").setCustomValidity(x.isDate("yearRegister"===e.target.id?e.target.value:a.state.year,"monthRegister"===e.target.id?e.target.value:a.state.month,"dayRegister"===e.target.id?e.target.value:a.state.day)?"":"Invalid date of birth."),document.querySelector("#yearRegister").setCustomValidity((new Date).getFullYear()-parseInt("yearRegister"===e.target.id?e.target.value:a.state.year)>=5?"":"You must be 5 years or older")},a.chooseSex=function(){return document.querySelector("#female-register").setCustomValidity(a.state.sex?"":"Please select one of these options")},a.getIsValidDateOfBirth=function(){return(a.state.submitted||a.state.day!==(new Date).getDate().toString()||a.state.month!==(new Date).getMonth().toString()||a.state.year!==(new Date).getFullYear().toString())&&(x.isDate(a.state.year,a.state.month,a.state.day)&&x.isOldEnough(a.state.year)?"is-valid":"is-invalid")},a.onSubmit=function(e){e.preventDefault(),a.setState({submitted:!0}),a.state.password===a.state.confirm&&a.state.first_name&&a.state.last_name&&a.state.email&&a.state.password&&a.state.confirm&&a.state.day&&a.state.month&&a.state.year&&(document.querySelector("#female-register").setCustomValidity(a.state.sex?"":"Please select one of these options"),document.querySelector("#yearRegister").setCustomValidity(x.isOldEnough(a.state.year)?"":"You must be 5 years or older"),L.create(a.state).then((function(e){alert(e.data),document.querySelector(".form-register").reset(),document.querySelector("meter").value=0,a.setState(Q)})))},a.componentDidUpdate=function(){return window.onbeforeunload=function(){return!!(a.state.first_name||a.state.last_name||a.state.email||a.state.password||a.state.day||a.state.month||a.state.year||a.state.sex)||void 0}},a.render=function(){return Object(I.jsx)("section",{className:"section-floating-center",children:Object(I.jsxs)("form",{className:"form-register",onSubmit:a.onSubmit,children:[Object(I.jsx)("button",{className:"close",type:"reset",onClick:a.props.close,children:Object(I.jsx)("i",{className:"material-icons",children:"close"})}),Object(I.jsx)("h1",{className:"h1-register",children:"Sign Up"}),Object(I.jsxs)("div",{className:"form-row",children:[Object(I.jsxs)("div",{className:"form-floating col-md-6 ".concat(a.state.first_name&&"float"),children:[Object(I.jsx)("input",{className:"form-control ".concat(a.state.first_name&&(x.isFirstName(a.state.first_name)?"is-valid":"is-invalid")),id:"firstNameRegister",name:"first_name",type:"text",pattern:x.firstNamePattern,onInput:a.enterFirstName,onInvalid:a.enterFirstName,onChange:a.setValue,required:!0}),Object(I.jsx)("label",{htmlFor:"firstNameRegister",children:"First name"})]}),Object(I.jsxs)("div",{className:"form-floating col-md-6 ".concat(a.state.last_name&&"float"),children:[Object(I.jsx)("input",{className:"form-control ".concat(a.state.last_name&&(x.isLastName(a.state.last_name)?"is-valid":"is-invalid")),id:"lastNameRegister",name:"last_name",type:"text",pattern:x.lastNamePattern,onInput:a.enterLastName,onInvalid:a.enterLastName,onChange:a.setValue,required:!0}),Object(I.jsx)("label",{htmlFor:"lastNameRegister",children:"Last name"})]})]}),Object(I.jsxs)("div",{className:"form-floating ".concat(a.state.email&&"float"),children:[Object(I.jsx)("input",{className:"form-control ".concat(a.state.email&&(x.isEmail(a.state.email)&&a.state.available?"is-valid":"is-invalid")),id:"addressRegister",name:"email",type:"email",pattern:x.emailPattern,onInput:a.enterEmail,onInvalid:a.enterEmail,onChange:a.setValue,required:!0}),Object(I.jsx)("label",{htmlFor:"addressRegister",children:"Email"})]}),Object(I.jsxs)("div",{className:"form-row",children:[Object(I.jsxs)("div",{className:"form-floating col-md-6 ".concat(a.state.password&&"float"," form-floating-password"),children:[Object(I.jsx)("input",{className:"form-control ".concat(a.state.password&&(x.checkPassword(a.state.password).isStrong?"is-valid":"is-invalid")),id:"passwordRegister",name:"password",type:"password",minLength:"8",onInput:a.enterPassword,onChange:a.setValue,required:!0}),Object(I.jsx)("label",{htmlFor:"passwordRegister",children:"Password"})]}),Object(I.jsxs)("div",{className:"form-floating col-md-6 ".concat(a.state.confirm&&"float"," form-floating-confirm"),children:[Object(I.jsx)("input",{className:"form-control ".concat(a.state.confirm&&(a.state.confirm===a.state.password?"is-valid":"is-invalid")),id:"confirmRegister",name:"confirm",type:"password",onInput:a.enterConfirm,onInvalid:a.enterConfirm,onChange:a.setValue,required:!0}),Object(I.jsx)("label",{htmlFor:"confirmRegister",children:"Confirm"})]})]}),Object(I.jsx)("meter",{id:"passwordStrengthRegister",title:"Use 8 or more characters with a mix of letters, numbers & symbols",max:"4",value:"0"}),Object(I.jsx)("div",{className:"form-group-password-strength",children:a.state.strength&&Object(I.jsx)("label",{className:"password-strength",htmlFor:"passwordStrengthRegister",children:x.checkPassword(a.state.password).strength})}),Object(I.jsx)("label",{className:"label-group ".concat(a.getIsValidDateOfBirth()),htmlFor:"dateOfBirthRegister",children:"Date of birth"}),Object(I.jsxs)("div",{className:"form-row",id:"dateOfBirthRegister",children:[Object(I.jsxs)("div",{className:"form-floating col-md-4 ".concat(a.state.day&&"float"),children:[Object(I.jsx)("select",{className:"form-control-day ".concat(a.getIsValidDateOfBirth()),id:"dayRegister",name:"day",value:a.state.day,onInput:a.chooseDateOfBirth,onChange:a.setValue,required:!0,children:"0".repeat(31).split("").map((function(e,t){return Object(I.jsx)("option",{value:t+1,children:t+1},t)}))}),Object(I.jsx)("label",{htmlFor:"dayRegister",children:"Day"})]}),Object(I.jsxs)("div",{className:"form-floating col-md-4 ".concat(a.state.month&&"float"),children:[Object(I.jsx)("select",{className:"form-control-month ".concat(a.getIsValidDateOfBirth()),id:"monthRegister",name:"month",value:a.state.month,onInput:a.chooseDateOfBirth,onChange:a.setValue,required:!0,children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((function(e,t){return Object(I.jsx)("option",{value:t,children:e},t)}))}),Object(I.jsx)("label",{htmlFor:"monthRegister",children:"Month"})]}),Object(I.jsxs)("div",{className:"form-floating col-md-4 ".concat(a.state.year&&"float"),children:[Object(I.jsx)("select",{className:"form-control-year ".concat(a.getIsValidDateOfBirth()),id:"yearRegister",name:"year",required:!0,"aria-describedby":"validationDateOfBirth",onInput:a.chooseDateOfBirth,onChange:a.setValue,children:"0".repeat(200).split("").map((function(e,t){return Object(I.jsx)("option",{value:(new Date).getFullYear()-t,children:(new Date).getFullYear()-t},t)}))}),Object(I.jsx)("label",{htmlFor:"yearRegister",children:"Year"})]})]}),Object(I.jsx)("label",{className:"label-group ".concat(a.state.sex?"is-valid":a.state.submitted&&!a.state.sex&&"is-invalid"),htmlFor:"genderRegister",children:"Gender"}),Object(I.jsxs)("div",{className:"form-row",id:"genderRegister",children:[Object(I.jsx)("div",{className:"form-group col-md-4",children:Object(I.jsxs)("div",{className:"form-check-female ".concat(a.state.sex?"is-valid":a.state.submitted&&!a.state.sex&&"is-invalid"),onClick:a.checkSex,children:[Object(I.jsx)("label",{className:"form-check-label flex-fill",htmlFor:"female-register",children:"Female"}),Object(I.jsx)("input",{className:"form-check-input is-valid",id:"female-register",type:"radio",name:"sex",value:R.FEMALE,checked:a.state.sex===R.FEMALE,onInput:a.chooseSex,onChange:a.setValue})]})}),Object(I.jsx)("div",{className:"form-group col-md-4",children:Object(I.jsxs)("div",{className:"form-check-male ".concat(a.state.sex?"is-valid":a.state.submitted&&!a.state.sex&&"is-invalid"),onClick:a.checkSex,children:[Object(I.jsx)("label",{className:"form-check-label flex-fill",htmlFor:"male-register",children:"Male"}),Object(I.jsx)("input",{className:"form-check-input",id:"male-register",type:"radio",name:"sex",value:R.MALE,checked:a.state.sex===R.MALE,onInput:a.chooseSex,onChange:a.setValue})]})}),Object(I.jsx)("div",{className:"form-group col-md-4",children:Object(I.jsxs)("div",{className:"form-check-other ".concat(a.state.sex?"is-valid":a.state.submitted&&!a.state.sex&&"is-invalid"),onClick:a.checkSex,children:[Object(I.jsx)("label",{className:"form-check-label flex-fill",htmlFor:"other-register",children:"Other"}),Object(I.jsx)("input",{className:"form-check-input",id:"other-register",type:"radio",name:"sex",value:R.OTHER,checked:a.state.sex===R.OTHER,onInput:a.chooseSex,onChange:a.setValue})]})})]}),Object(I.jsx)("div",{className:"form-row-sign-up",children:Object(I.jsx)("button",{className:"btn-sign-up",type:"submit",children:"Sign up"})})]})})},a.state=Q,a}return n}(a.Component),A={email:"",password:"",remember:!1,available:!1,visible:!1,isOpen:!1},T=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setValue=function(e){return a.setState(Object(m.a)({},e.target.getAttribute("name"),e.target.value))},a.setChecked=function(e){return a.setState(Object(m.a)({},e.target.getAttribute("name"),e.target.checked))},a.enterEmail=function(){var e=Object(E.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=8;break}return e.next=3,S.available(t.target.value);case 3:e.t0=e.sent.status,n=200===e.t0,t.target.setCustomValidity(x.isEmail(t.target.value)?n?"Email not registered":"":"Invalid email!"),a.setState({available:n,visible:!1,password:""}),setTimeout((function(){document.querySelector(".form-group-password")&&(document.querySelector(".form-group-password").style.height=0),document.querySelector(".input-email").style.width="260px"}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.open=function(){return a.setState({isOpen:!0})},a.close=function(){return a.setState({isOpen:!1})},a.onSubmit=function(e){e.preventDefault(),a.state.email&&(a.setState({visible:!0}),setTimeout((function(){document.querySelector(".form-group-password").style.height="39px",document.querySelector(".input-email").style.width="315px",document.querySelector(".input-password").focus(),a.state.password&&S.login(a.state).then((function(e){x.setCookies(e.data,a.state.remember?31536e3:0),a.setState(A),"false"===x.getCookie("is_activate")&&alert("Your session exists for 5 minutes."),window.location.reload()}))})))},a.componentDidUpdate=function(){return window.onbeforeunload=function(){return!(!a.state.email&&!a.state.password)||void 0}},a.render=function(){return Object(I.jsxs)("section",{className:"section-only",children:[Object(I.jsxs)("form",{className:"form-only",onSubmit:a.onSubmit,children:[Object(I.jsx)("img",{className:"logo-img",src:"/logo.svg",alt:"CloudDrive16 logo"}),Object(I.jsxs)("h1",{className:"h1-only",children:["Sign in to ","CloudDrive16"]}),Object(I.jsxs)("div",{className:"form-group-email ".concat(a.state.visible?"rounded-top":"rounded"),children:[Object(I.jsx)("input",{className:"input-email",type:"email",name:"email",placeholder:"Email",value:a.state.email,pattern:x.emailPattern,onInput:a.enterEmail,onInvalid:a.enterEmail,onChange:a.setValue,title:"Please fill out this field.",required:!0}),!a.state.visible&&Object(I.jsx)("button",{className:"btn-input",type:"submit",disabled:!a.state.email,hidden:!0,children:Object(I.jsx)("i",{className:"material-icons",children:"input"})})]}),Object(I.jsx)("div",{className:"form-group-container",children:a.state.visible&&a.state.email&&Object(I.jsxs)("div",{className:"form-group-password",children:[Object(I.jsx)("input",{className:"input-password",type:"password",name:"password",placeholder:"Password",value:a.state.password,onChange:a.setValue,required:!0}),Object(I.jsx)("button",{className:"btn-input",type:"submit",disabled:!a.state.password,children:Object(I.jsx)("i",{className:"material-icons",children:"input"})})]})}),Object(I.jsxs)("div",{className:"form-check-remember",children:[Object(I.jsx)("input",{className:"remember-me-input",id:"rememberLogin",type:"checkbox",name:"remember",value:a.state.remember,onChange:a.setChecked}),Object(I.jsx)("label",{className:"remember-me-label",htmlFor:"rememberLogin",children:"Keep me signed in"})]}),Object(I.jsxs)("a",{className:"link-find-account",href:"/find-account",target:"_blank",rel:"noopener noreferrer",children:["Forgotten password? ",Object(I.jsx)("i",{className:"material-icons",children:"open_in_new"})]}),Object(I.jsx)("button",{className:"btn-create-account",type:"button",onClick:a.open,children:"Create New Account"})]}),a.state.isOpen&&Object(I.jsx)(V,{close:a.close})]})},a.state=A,a}return n}(a.Component),B="".concat(window.location.origin+"/api","/codes/"),U=new function e(){Object(o.a)(this,e),this.create=function(){return w.post(B)}},H=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).getIndex=function(e){return Array.from(document.querySelector(".form-row").children).findIndex((function(t){return t===e}))},a.getInput=function(){return document.querySelectorAll(".form-control-digit")},a.select=function(e){return e.target.select()},a.enterNumber=function(e){var t=[a.getIndex(e.target.closest(".form-group")),a.getInput()],n=t[0],s=t[1];if(e.target.value.length>1)return s[n].value=e.target.value[0];n<5&&x.isDigit(s[n].value)&&1===s[n].value.length&&s[n+1].focus(),a.isSubmit()&&a.onSubmit(e)},a.clearNumber=function(e){var t=[a.getIndex(e.target.closest(".form-group")),a.getInput()],n=t[0],s=t[1];8===e.keyCode&&n>0&&""===e.target.value&&s[n-1].focus()},a.pasteNumber=function(e){var t=[a.getIndex(e.target.closest(".form-group")),a.getInput()],n=t[0],s=t[1],r=(e.clipboardData||window.clipboardData).getData("text"),i=r.length>6-n?6-n:r.length,o=i+n>5?5:i+n;setTimeout((function(){s[n].value=x.isDigit(r[0])?r[0]:null,x.isDigits(r)&&s[o].focus()}));for(var c=n,l=0;l<i;c++,l++)s[c].value=x.isDigit(r[l])?r[l]:null;a.isSubmit()&&a.onSubmit(e)},a.send=function(e){return e.preventDefault()||U.create().then((function(e){return a.setState({sent:!0})||window.open(e.data)}))},a.isSubmit=function(){return 6==="0".repeat(6).split("").map((function(e,t){return document.querySelectorAll(".form-control-digit")[t].value})).filter((function(e){return x.isDigit(e)})).length},a.onSubmit=function(e){return e.preventDefault()||S.verify({code:Array.from(document.querySelectorAll(".form-control-digit")).map((function(e){return e.value})).join("")}).then((function(){return window.location.reload()})).catch((function(){document.querySelector(".form-only").reset(),document.querySelector(".form-control-digit").focus()}))},a.render=function(){return Object(I.jsx)("section",{className:"section-only",children:Object(I.jsxs)("form",{className:"form-only",onSubmit:a.onSubmit,children:[Object(I.jsx)("img",{className:"logo-img",src:"/logo.svg",alt:"CloudDrive16 logo"}),Object(I.jsx)("h1",{className:"h1-only",children:"Activate your account"}),Object(I.jsx)("p",{children:"We sent a code to your email. Please enter the verification code."}),Object(I.jsx)("div",{className:"form-row",children:"0".repeat(6).split("").map((function(e,t){return Object(I.jsx)("div",{className:"form-group",children:Object(I.jsx)("input",{className:"form-control-digit",type:"number",maxLength:"1",onClick:a.select,onInput:a.enterNumber,onDrop:a.enterNumber,onKeyUp:a.clearNumber,onKeyDown:a.clearNumber,onPaste:a.pasteNumber,required:!0})},t)}))}),Object(I.jsx)("a",{href:"/",onClick:a.send,children:"".concat(a.state.sent?"Resend":"Send"," Code")})]})})},a.state={sent:!1},a}return n}(a.Component),$=n(120),z=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).select=function(e){var t,n;document.querySelectorAll(".list-group-item").forEach((function(e){return(null===e||void 0===e?void 0:e.classList.contains("active"))&&(null===e||void 0===e?void 0:e.classList.remove("active"))})),null===(t=e.target.closest("button"))||void 0===t||t.classList.add("active"),(null===(n=e.target.closest("button"))||void 0===n?void 0:n.classList.contains("open"))?a.close(e.target.closest("button").id):a.open(e.target.closest("button").id),a.setState({new:!1,id:e.target.closest("button").id})},a.open=function(e){var t=document.querySelector("#".concat(e));if("TRoot"===e)a.setState({showedFolders:a.state.folders.filter((function(e){return"/"===e.path}))}),!t.classList.contains("open")&&t.classList.add("open");else{var n=a.state.folders.filter((function(t){return t.path===x.toPath(a.state.folders.find((function(t){return t._id===e})))}));!a.state.showedFolders.some((function(e){return n.includes(e)}))&&a.setState({showedFolders:a.state.showedFolders.concat(n)}),n.length&&!t.classList.contains("open")&&t.classList.add("open")}},a.close=function(e){var t=document.querySelector("#".concat(e));if("TRoot"===e)a.setState({showedFolders:[]}),t.classList.contains("open")&&t.classList.remove("open");else{var n=a.state.folders.filter((function(t){return t.path===x.toPath(a.state.folders.find((function(t){return t._id===e})))}));a.state.showedFolders.some((function(e){return n.includes(e)}))&&a.setState({showedFolders:a.state.showedFolders.filter((function(e){return!n.some((function(t){return new RegExp(t.path).test(e.path)}))}))}),n.map((function(e){var t,n;return(null===(t=document.getElementById(e._id))||void 0===t?void 0:t.classList.contains("open"))&&(null===(n=document.getElementById(e._id))||void 0===n?void 0:n.classList.remove("open"))})),n.length&&t.classList.contains("open")&&t.classList.remove("open")}},a.create=function(){return new Promise((function(e){return a.setState({new:!0})||e()})).then((function(){return document.querySelector("#newFolder").focus()}))},a.move=function(){return"folder"===a.props.type?C.move(a.props.id,{did:a.state.id.slice(1)}).then((function(e){return a.refresh().then((function(){return a.props.close()||alert(e.data)}))})):F.move(a.props.id,{did:a.state.id.slice(1)}).then((function(e){return a.refresh().then((function(){return a.props.close()||alert(e.data)}))}))},a.copy=function(){return"folder"===a.props.type?C.copy(a.props.id,{did:a.state.id.slice(1)}).then((function(e){return a.refresh().then((function(){return a.props.close()||alert(e.data)}))})):F.copy(a.props.id,{did:a.state.id.slice(1)}).then((function(e){return a.refresh().then((function(){return a.props.close()||alert(e.data)}))}))},a.submit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.showedFolders.find((function(e){return e._id===a.state.id}));return e.preventDefault()||C.create({name:a.state.name,path:t?x.toPath(t):"/"}).then((function(){return a.setState({oldFolders:a.state.folders})||a.refresh().then((function(){return a.setState({new:!1,showedFolders:a.state.showedFolders.concat(a.state.folders.filter((function(e){return a.state.oldFolders.every((function(t){return t._id!==e._id}))})))})}))}))},a.refresh=function(){return C.list().then((function(e){var t;return a.props.refresh().then(a.setState({folders:null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(e._id="T".concat(e._id))&&e}))}))}))},a.componentDidMount=function(){return a.refresh().then((function(){return a.setState({showedFolders:a.state.folders.filter((function(e){return"/"===e.path}))})}))},a.render=function(){return Object(I.jsxs)("section",{className:"section-floating-aside",children:[Object(I.jsx)("div",{className:"col-8"}),Object(I.jsxs)("aside",{className:"aside-right col-4",children:[Object(I.jsxs)("span",{className:"command-bar",children:[Object(I.jsxs)("span",{className:"primary-command",children:["move"===a.props.action&&Object(I.jsxs)("button",{className:"btn-move",onClick:a.move,children:[Object(I.jsx)("i",{className:"material-icons",children:"drive_file_move"}),"Move"]}),"copy"===a.props.action&&Object(I.jsxs)("button",{className:"btn-copy",onClick:a.copy,children:[Object(I.jsx)("i",{className:"material-icons",children:"folder"===a.props.type?"folder_copy":"file_copy"}),"Copy"]}),Object(I.jsxs)("button",{className:"btn-new-folder",onClick:a.create,children:[Object(I.jsx)("i",{className:"material-icons",children:"create_new_folder"})," New"]})]}),Object(I.jsx)("span",{className:"middle-command"}),Object(I.jsx)("span",{className:"secondary-command",children:Object(I.jsx)("button",{className:"btn-close",type:"button",onClick:a.props.close,children:Object(I.jsx)("i",{className:"material-icons",children:"close"})})})]}),Object(I.jsx)("main",{className:"main-folder-tree",children:Object(I.jsxs)("div",{className:"list-group",children:[Object(I.jsxs)("div",{children:[Object(I.jsxs)("button",{type:"button",className:"list-group-item list-group-item-action active open",id:"TRoot",value:"/",onClick:a.select,children:[Object(I.jsx)("i",{className:"material-icons",children:a.state.showedFolders.filter((function(e){return x.toPath(e)})).length?"expand_more":"navigate_next"}),Object(I.jsx)("img",{src:"/logo.svg",alt:"CloudDrive16 logo",width:"30",onClick:a.toggle}),"\xa0\xa0My files"]}),a.state.new&&"TRoot"===a.state.id&&Object(I.jsx)("button",{type:"button",className:"list-group-item list-group-item-action",style:{marginLeft:"40px"},children:Object(I.jsxs)("form",{className:"form-horizontal",onSubmit:a.submit,children:[Object(I.jsx)("img",{className:"folder",src:"/svg/folder.svg",alt:""}),"\xa0\xa0",Object(I.jsx)("input",{type:"text",name:"name",id:"newFolder",placeholder:"Enter your folder name",onChange:function(e){return a.setState({name:e.target.value})}}),"\xa0\xa0",Object(I.jsx)("input",{className:"submit-create",type:"submit",value:"Create"})]})})]}),a.state.showedFolders.sort((function(e,t){return x.toPath(e)===x.toPath(t)?0:x.toPath(e)<x.toPath(t)?-1:1})).map((function(e,t){return Object(I.jsxs)("div",{children:[Object(I.jsxs)("button",{type:"button",className:"list-group-item list-group-item-action",id:e._id,style:{marginLeft:"".concat(40*((x.toPath(e).match(/\//g)||[]).length-1),"px")},onClick:a.select,children:[a.state.folders.filter((function(t){return t.path===x.toPath(e)})).length?Object(I.jsx)("i",{className:"material-icons",children:a.state.showedFolders.filter((function(t){return t.path===x.toPath(e)})).length?"expand_more":"navigate_next"}):Object(I.jsx)("span",{style:{width:"29px"}}),Object(I.jsx)("img",{className:"folder",src:"/svg/folder.svg",alt:""}),"\xa0\xa0",e.name]},t),a.state.new&&a.state.id===e._id&&Object(I.jsx)("button",{type:"button",className:"list-group-item list-group-item-action",style:{marginLeft:"".concat(40*(x.toPath(e).match(/\//g)||[]).length,"px")},children:Object(I.jsxs)("form",{className:"form-horizontal",onSubmit:a.submit,children:[Object(I.jsx)("img",{className:"folder",src:"/svg/folder.svg",alt:""}),"\xa0\xa0",Object(I.jsx)("input",{type:"text",name:"name",id:"newFolder",placeholder:"Enter your folder name",onChange:function(e){return a.setState({name:e.target.value})}}),"\xa0\xa0",Object(I.jsx)("input",{className:"submit-create",type:"submit",value:"Create"})]})})]},t)}))]})})]})]})},a.state={oldFolders:[],folders:[],showedFolders:[],new:!1,id:"TRoot",name:""},a}return n}(a.Component),Y=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).init=function(){if("image"===a.props.type||"video"===a.props.type){var e=document.querySelector(".".concat(a.props.type)),t=document.querySelector(".bg-media");e.clientWidth/e.clientHeight>t.clientWidth/t.clientHeight?e.style.width="100vw":e.style.height="calc(100vh - 53px)",document.querySelector("body").style.overflow="hidden"}},a.refresh=function(){if("image"===a.props.type){var e=document.querySelector(".image"),t=document.querySelector(".bg-media");e.style.height="auto",e.style.width="auto",e.style.transform="rotate("+90*a.state.factor+"deg)",a.state.factor%2?e.clientHeight/e.clientWidth>t.clientWidth/t.clientHeight?e.style.height="100vw":e.style.width="calc(100vh - 53px)":e.clientWidth/e.clientHeight>t.clientWidth/t.clientHeight?e.style.width="100vw":e.style.height="calc(100vh - 53px)"}},a.rotateLeft=function(){return a.setState({factor:a.state.factor+1})||setTimeout((function(){return a.refresh()}))},a.rotateRight=function(){return a.setState({factor:a.state.factor-1})||setTimeout((function(){return a.refresh()}))},a.prev=function(){return new Promise((function(e){return a.setState({factor:0})||e()})).then((function(){return a.props.prev()||a.refresh()}))},a.next=function(){return new Promise((function(e){return a.setState({factor:0})||e()})).then((function(){return a.props.next()||a.refresh()}))},a.componentDidMount=function(){window.onkeyup=function(e){switch(e.keyCode){case 32:"video"===a.props.type&&(document.querySelector(".video").paused?document.querySelector(".video").play():document.querySelector(".video").pause()),"audio"===a.props.type&&(document.querySelector(".audio").paused?document.querySelector(".audio").play():document.querySelector(".audio").pause());break;case 37:a.props.prev();break;case 39:a.props.next()}},a.init()},a.componentDidUpdate=function(){return a.init()},a.render=function(){return Object(I.jsxs)("section",{className:"section-floating",children:[Object(I.jsxs)("span",{className:"command-bar",children:[Object(I.jsxs)("span",{className:"primary-command",children:[Object(I.jsxs)("button",{className:"btn-download",type:"button",onClick:a.props.download,children:[Object(I.jsx)("i",{className:"material-icons",children:"download"}),"Download"]}),"image"===a.props.type&&Object(I.jsxs)("button",{className:"btn-rotate-left",type:"button",onClick:a.rotateLeft,children:[Object(I.jsx)("i",{className:"material-icons",children:"rotate_90_degrees_ccw"}),"Rotate left 90\xb0"]}),"image"===a.props.type&&Object(I.jsxs)("button",{className:"btn-rotate-right",type:"button",onClick:a.rotateRight,children:[Object(I.jsx)("i",{className:"material-icons",children:"rotate_90_degrees_cw"}),"Rotate right 90\xb0"]}),"image"!==a.props.type&&Object(I.jsx)("span",{className:"left-space",style:{width:"56px"}})]}),Object(I.jsxs)("span",{className:"middle-command",children:[Object(I.jsx)("i",{className:"material-icons",children:"image"===a.props.type?"image":"video"===a.props.type?"video_file":"audio"===a.props.type?"audio_file":"none"}),Object(I.jsxs)("strong",{children:["\xa0",a.props.src.split("/")[a.props.src.split("/").length-1]]})]}),Object(I.jsxs)("span",{className:"secondary-command",children:["image"===a.props.type&&Object(I.jsx)("span",{className:"right-space",style:{width:"270px"}}),Object(I.jsx)("button",{className:"btn-prev",type:"button",disabled:1===a.props.index,onClick:a.prev,children:Object(I.jsx)("i",{className:"material-icons",children:"skip_previous"})}),Object(I.jsxs)("span",{className:"span-index",children:["\xa0\xa0",a.props.index+"/"+a.props.count,"\xa0\xa0"]}),Object(I.jsx)("button",{className:"btn-next",type:"button",disabled:a.props.index===a.props.count,onClick:a.next,children:Object(I.jsx)("i",{className:"material-icons",children:"skip_next"})}),Object(I.jsx)("button",{className:"btn-close",type:"button",onClick:a.props.close,children:Object(I.jsx)("i",{className:"material-icons",children:"close"})})]})]}),!!a.props.percent&&Object(I.jsx)($.a,{value:a.props.percent}),Object(I.jsx)("span",{className:"bg-media",children:"image"===a.props.type?Object(I.jsx)("img",{className:"image",src:a.props.src,alt:"Image0"}):"video"===a.props.type?Object(I.jsx)("video",{className:"video",src:a.props.src,autoPlay:!0,controls:!0}):"audio"===a.props.type?Object(I.jsx)("audio",{className:"audio",src:a.props.src,autoPlay:!0,controls:!0}):Object(I.jsx)("span",{})})]})},a.state={factor:0},a}return n}(a.Component),W=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).refresh=function(){return C.list().then((function(e){var t=e.data.filter((function(e){return"trash"===x.getQuery("location")?e.is_trash:!e.is_trash})),n="root"===x.getQuery("id")?{path:"/",name:""}:e.data.find((function(e){return e._id===x.getQuery("id")})),s=""===(null===n||void 0===n?void 0:n.name)?"/":x.toPath(n);a.setState({folders:t,items:"trash"===x.getQuery("location")?t:x.getQuery("keyword")?t.filter((function(e){return new RegExp(x.getQuery("keyword"),"ig").test(e.name)})):t.filter((function(e){return e.path===s})),path:s}),F.list().then((function(e){var t=e.data.filter((function(e){return"trash"===x.getQuery("location")?e.is_trash:!e.is_trash}));if(a.setState({files:t,itemFiles:"trash"===x.getQuery("location")?t:x.getQuery("keyword")?t.filter((function(e){return new RegExp(x.getQuery("keyword"),"ig").test(e.name)})):t.filter((function(e){return e.path===s}))}),x.getQuery("fid")){var n=a.getMedia(t.find((function(e){return e._id===x.getQuery("fid")})));a.setState({index:a.getMedias().findIndex((function(e){return e===n}))+1,media:n})}}))}))},a.return=function(){return x.deleteQuery("location")||a.refresh().then((function(){var e;return(document.title="".concat("root"===x.getQuery("id")?"My files":null===(e=a.state.folders.find((function(e){return e._id===x.getQuery("id")})))||void 0===e?void 0:e.name,"\n      - ").concat("CloudDrive16"," "))&&a.setState({location:""})}))},a.setTrash=function(){return x.setQuery("location","trash")||a.refresh().then((function(){return(document.title="Trash - ".concat("CloudDrive16"))&&a.setState({location:"trash"})}))},a.isEmpty=function(){var e,t;return"trash"===x.getQuery("location")&&!(null===(e=a.state)||void 0===e?void 0:e.folders.concat(null===(t=a.state)||void 0===t?void 0:t.files).filter((function(e){return e.is_trash})).length)},a.save=function(e){var t=new FormData,n=[];t.append("path",a.state.path),Array.from(e.target.files).forEach((function(e){return n.push(e.name)&&t.append("files",e,e.name)})),t.append("names",JSON.stringify(n)),w.post("".concat(window.location.origin+"/api","/files/"),t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){return a.setState({percent:Math.round(e.loaded/e.total*100)})}}).then((function(){return a.refresh()&&a.setState({percent:0})})).catch((function(e){var t,n,a,s;return e.response?alert("object"===typeof(null===(t=e.response)||void 0===t?void 0:t.data)?JSON.stringify(null===(n=e.response)||void 0===n?void 0:n.data):(null===(a=e.response)||void 0===a?void 0:a.data)||(null===(s=e.response)||void 0===s?void 0:s.statusText))||401===e.response.status&&(window.location.href="/"):console.error(e)}))},a.upload=function(){return document.getElementById("files").click()},a.download=function(){return window.open("".concat(window.location.origin+"/api","/files/d/")+a.state.id)},a.create=function(){return C.create({name:prompt("Create folder","New folder"),path:a.state.path}).then((function(){return a.refresh()}))},a.open=function(e){var t,n;if(/folder/g.test(e.target.className)||e.target.closest(".li-folder")){var s=a.state.folders.find((function(t){return t._id===e.target.closest(".li-folder").id}));x.deleteQuery("keyword"),"trash"!==x.getQuery("location")&&(x.setQuery("id",null===s||void 0===s?void 0:s._id),a.setState({path:a.state.path+(null===s||void 0===s?void 0:s.name)}),document.title="".concat(null===s||void 0===s?void 0:s.name," - ").concat("CloudDrive16"),a.refresh())}else if(x.isMedia(null===(t=e.target)||void 0===t?void 0:t.closest(".li-file").getAttribute("name"))){var r,i;x.setQuery("fid",null===(r=e.target)||void 0===r?void 0:r.closest(".li-file").id),F.read(null===(i=e.target)||void 0===i?void 0:i.closest(".li-file").id).then((function(t){var n,s,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat(window.location.origin+"/api","/media/?path=").concat(x.getCookie("id"),"/files").concat(null===(n=t.data)||void 0===n?void 0:n.path).concat(null===(s=t.data)||void 0===s?void 0:s.name);return a.setState({id:null===(r=e.target)||void 0===r?void 0:r.closest(".li-file").id,name:null===(i=e.target)||void 0===i?void 0:i.closest(".li-file").getAttribute("name"),index:a.getMedias().findIndex((function(e){return e===o}))+1,media:o})}))}else if(x.isPDF(null===(n=e.target)||void 0===n?void 0:n.closest(".li-file").getAttribute("name"))){var o;F.read(null===(o=e.target)||void 0===o?void 0:o.closest(".li-file").id).then((function(e){var t,n;return window.open("".concat(window.location.origin+"/api","/media/?path=").concat(x.getCookie("id"),"/files").concat(null===(t=e.data)||void 0===t?void 0:t.path).concat(null===(n=e.data)||void 0===n?void 0:n.name))}))}},a.openLocation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.folders.find((function(e){return a.state.parent===x.toPath(e)}));return window.location.href="?id=".concat(t?t._id:"root")},a.close=function(){return(document.querySelector("body").style.overflow="visible")&&(x.deleteQuery("fid")||a.setState({media:""}))},a.move=function(){return(document.body.style.overflow="hidden")&&a.setState({show:!0,action:"move"})},a.copy=function(){return(document.body.style.overflow="hidden")&&a.setState({show:!0,action:"copy"})},a.closeFolderTree=function(){return(document.body.style.overflow="visible")&&a.setState({show:!1})},a.rename=function(){return"folder"===a.state.type?C.update(a.state.id,{name:prompt("Rename folder",a.state.name)}).then((function(){return a.refresh()})):F.update(a.state.id,{name:prompt("Rename file",a.state.name)}).then((function(){return a.refresh()}))},a.delete=function(){return"folder"===a.state.type?"trash"===x.getQuery("location")?C.deleteForever(a.state.id).then((function(){return a.refresh()})):C.delete(a.state.id).then((function(){return a.refresh()})):"trash"===x.getQuery("location")?F.deleteForever(a.state.id).then((function(){return a.refresh()})):F.delete(a.state.id).then((function(){return a.refresh()}))},a.restore=function(){return"folder"===a.state.type?C.restore(a.state.id).then((function(){return a.refresh()})):F.restore(a.state.id).then((function(){return a.refresh()}))},a.restoreTrash=function(){var e,t;return window.confirm("Restore all?\nAre you sure you want to restore all the items?")&&(null===(e=a.state.folders)||void 0===e?void 0:e.filter((function(e){return e.is_trash})).map((function(e){return C.restore(e._id).then((function(){return a.refresh()}))})))&&(null===(t=a.state.files)||void 0===t?void 0:t.filter((function(e){return e.is_trash})).map((function(e){return F.restore(e._id).then((function(){return a.refresh()}))})))},a.empty=function(){var e,t;return window.confirm("Empty all?\nAre you sure you want to permanently delete all of these items?")&&(null===(e=a.state.folders)||void 0===e?void 0:e.filter((function(e){return e.is_trash})).map((function(e){return C.deleteForever(e._id).then((function(){return a.refresh()}))})))&&(null===(t=a.state.files)||void 0===t?void 0:t.filter((function(e){return e.is_trash})).map((function(e){return F.deleteForever(e._id).then((function(){return a.refresh()}))})))},a.choose=function(e){var t,n,s;e.preventDefault();var r=/file|img|video/g.test(e.target.className)?e.target.closest(".li-folder")?"folder":"file":/folder/g.test(e.target.className)?"folder":null;a.getMenuFolder().style.display="block",a.getMenuFolder().style.top="".concat(e.clientY,"px"),a.getMenuFolder().style.left="".concat(e.clientX,"px"),a.setState({id:null===(t=e.target.closest(".li-".concat(r)))||void 0===t?void 0:t.id,type:r,name:null===(n=e.target.closest(".li-".concat(r)))||void 0===n?void 0:n.getAttribute("name"),parent:null===(s=e.target.closest(".li-".concat(r)))||void 0===s?void 0:s.getAttribute("value")}),document.querySelector(".dropdown-item-download").style.setProperty("display","folder"===r?"none":"flex","important")},a.clickOut=function(e){return a.getMenuFolder().style.display="none"},a.getMenuFolder=function(){return document.querySelector(".dropdown-menu-folder")},a.access=function(e){var t=Number.parseInt(e.target.id),n=1===t?"/":a.state.path.replace(/\/$/,"").split("/").slice(0,t).join("/"),s=a.state.folders.find((function(e){return e.path.replace(/\/$/,"")===n.replace(/\/$/,"")&&e.name===a.state.path.split("/")[t]}));document.title="".concat(0===t?"My files":null===s||void 0===s?void 0:s.name," - ").concat("CloudDrive16"),a.setState({path:n||"/"}),x.setQuery("id",0===Number.parseInt(e.target.id)?"root":null===s||void 0===s?void 0:s._id),a.refresh()},a.getMediaFiles=function(){return a.state.files.filter((function(e){return e.path===a.state.path&&x.isMedia(e.name)}))},a.getMedia=function(e){return"".concat(window.location.origin+"/api","/media/?path=").concat(x.getCookie("id"),"/files").concat(e.path).concat(e.name)},a.getMedias=function(){return a.getMediaFiles().map((function(e){return a.getMedia(e)}))},a.prev=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.getMedias(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.getMediaFiles();return t.findIndex((function(e){return e===a.state.media}))>0&&(x.setQuery("fid",n[a.state.index-2]._id)||a.setState({index:a.state.index-1,media:t[t.findIndex((function(e){return e===a.state.media}))-1]}))},a.next=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.getMedias(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.getMediaFiles();return t.findIndex((function(e){return e===a.state.media}))<t.length-1&&(x.setQuery("fid",n[a.state.index]._id)||a.setState({index:a.state.index+1,media:t[t.findIndex((function(e){return e===a.state.media}))+1]}))},a.componentDidMount=function(){return a.refresh().then((function(){var e;return(document.title="".concat(x.getQuery("keyword")?'Search results for "'.concat(x.getQuery("keyword"),'"'):"trash"===x.getQuery("location")?"Trash":"root"===x.getQuery("id")?"My files":null===(e=a.state.folders.find((function(e){return e._id===x.getQuery("id")})))||void 0===e?void 0:e.name,"\n         - ").concat("CloudDrive16"))&&!window.location.search&&(window.location.search="id=root")}))},a.render=function(){return Object(I.jsxs)("section",{className:"section-files",onClick:a.clickOut,children:[Object(I.jsxs)("ul",{className:"dropdown-menu-folder",children:[!x.getQuery("location")&&Object(I.jsxs)("li",{className:"dropdown-item-move",onClick:a.move,children:[Object(I.jsx)("i",{className:"material-icons",children:"drive_file_move"}),"Move to..."]}),!x.getQuery("location")&&Object(I.jsxs)("li",{className:"dropdown-item-copy",onClick:a.copy,children:[Object(I.jsx)("i",{className:"material-icons",children:"folder"===a.state.type?"folder_copy":"file_copy"}),"Copy to..."]}),!x.getQuery("location")&&Object(I.jsx)("li",{children:Object(I.jsx)("hr",{className:"dropdown-divider"})}),Object(I.jsxs)("li",{className:"dropdown-item-download",onClick:a.download,children:[Object(I.jsx)("i",{className:"material-icons",children:"file_download"}),"Download"]}),Object(I.jsxs)("li",{className:"dropdown-item-rename",onClick:a.rename,children:[Object(I.jsx)("i",{className:"material-icons",children:"drive_file_rename_outline"}),"Rename"]}),"trash"===x.getQuery("location")&&Object(I.jsxs)("li",{className:"dropdown-item-restore",onClick:a.restore,children:[Object(I.jsx)("i",{className:"material-icons",children:"restore"}),"Restore"]}),Object(I.jsxs)("li",{className:"dropdown-item-delete",onClick:a.delete,children:[Object(I.jsx)("i",{className:"material-icons",children:"trash"===x.getQuery("location")?"delete_forever":"delete"}),"Delete ","trash"===x.getQuery("location")&&"forever"]}),x.getQuery("keyword")&&Object(I.jsx)("li",{children:Object(I.jsx)("hr",{className:"dropdown-divider"})}),x.getQuery("keyword")&&Object(I.jsxs)("li",{className:"dropdown-item-location",onClick:a.openLocation,children:[Object(I.jsx)("i",{className:"material-icons",children:"location_on"}),"Open item location"]})]}),Object(I.jsxs)("nav",{className:"left-nav col-2",id:"leftNav",children:[Object(I.jsx)("div",{className:"top-left-nav",children:Object(I.jsx)("label",{htmlFor:"leftNav",children:Object(I.jsx)("strong",{children:x.getCookie("first_name")+" "+x.getCookie("last_name")})})}),Object(I.jsxs)("ul",{className:"list-group",children:[Object(I.jsxs)("li",{className:"list-group-item-files ".concat(!x.getQuery("location")&&"active"),onClick:a.return,children:[Object(I.jsx)("i",{className:"material-icons",children:"folder"})," My files"]}),Object(I.jsxs)("li",{className:"list-group-item-trash ".concat("trash"===x.getQuery("location")&&"active"," "),onClick:a.setTrash,children:[Object(I.jsx)("i",{className:"material-icons",children:"delete"})," Trash"]})]})]}),Object(I.jsxs)("main",{className:"main-content",children:["trash"===x.getQuery("location")?!a.isEmpty()&&Object(I.jsxs)("span",{className:"main-command-bar",children:[Object(I.jsxs)("button",{className:"btn-restore",onClick:a.restoreTrash,children:[Object(I.jsx)("i",{className:"material-icons",children:"restore_from_trash"})," Restore"]}),Object(I.jsxs)("button",{className:"btn-empty",onClick:a.empty,children:[Object(I.jsx)("i",{className:"material-icons",children:"delete_forever"})," Empty"]})]}):Object(I.jsxs)("span",{className:"main-command-bar",children:[Object(I.jsxs)("button",{className:"btn-new-folder",onClick:a.create,children:[Object(I.jsx)("i",{className:"material-icons",children:"create_new_folder"})," New"]}),Object(I.jsx)("input",{type:"file",id:"files",onChange:a.save,multiple:!0,hidden:!0}),Object(I.jsxs)("button",{className:"btn-update",onClick:a.upload,children:[Object(I.jsx)("i",{className:"material-icons",children:"publish"})," Upload"]})]}),!!a.state.percent&&Object(I.jsx)($.a,{value:a.state.percent}),"trash"===x.getQuery("location")?!a.isEmpty()&&Object(I.jsx)("div",{className:"space-bar"}):x.getQuery("id")?Object(I.jsx)("span",{className:"path-bar",children:"/"===a.state.path?Object(I.jsx)("strong",{children:"My files"}):a.state.path.replace(/\/$/,"").split("/").map((function(e,t,n){return Object(I.jsx)("div",{children:0===t?Object(I.jsxs)("div",{className:"dir",children:[Object(I.jsx)("p",{className:"dir-parent",id:t,onClick:a.access,children:"My files"}),Object(I.jsx)("p",{children:"\xa0>\xa0"})]}):t===n.length-1?Object(I.jsx)("p",{children:Object(I.jsx)("strong",{children:e})}):Object(I.jsxs)("div",{className:"dir",children:[Object(I.jsx)("p",{className:"dir-parent",id:t,onClick:a.access,children:e}),Object(I.jsx)("p",{children:"\xa0>\xa0"})]})},t)}))}):x.getQuery("keyword")&&Object(I.jsx)("h5",{className:"title-bar",children:Object(I.jsx)("strong",{children:'Search results for "'.concat(x.getQuery("keyword"),'"')})}),!a.isEmpty()&&Object(I.jsxs)("ul",{className:"ls-folder",children:[a.state.items.map((function(e,t,n){return n.length?Object(I.jsxs)("li",{className:"li-folder",id:e._id,name:e.name,title:e.name,value:e.path,onClick:a.open,onContextMenu:a.choose,children:[Object(I.jsx)("img",{className:"bg-folder",id:"folder".concat(t),src:"svg/lg-bg.svg",alt:"background folder"}),x.isImages(a.state.files,e)?Object(I.jsx)("img",{className:"img",src:"".concat(window.location.origin+"/api","/media/?path=").concat(x.getCookie("id"),"/files").concat("/"===x.getImage(a.state.files,e).path?"/":x.getImage(a.state.files,e).path).concat(x.getImage(a.state.files,e).name),alt:"foreground folder"}):x.isVideos(a.state.files,e)?Object(I.jsx)("video",{className:"video-preview",src:"".concat(window.location.origin+"/api","/media/?path=").concat(x.getCookie("id"),"/files").concat("/"===x.getVideo(a.state.files,e).path?"/":x.getVideo(a.state.files,e).path).concat(x.getVideo(a.state.files,e).name)}):!x.isEmpty(a.state.folders,a.state.files,e)&&Object(I.jsx)("div",{className:"file"}),x.isImages(a.state.files,e)||x.isVideos(a.state.files,e)?Object(I.jsx)("img",{className:"fg-folder",src:"svg/lg-fg-media.svg",alt:"foreground folder",onContextMenu:a.choose}):Object(I.jsx)("img",{className:"fg-folder",src:"svg/lg-fg.svg",alt:"foreground folder"}),Object(I.jsx)("label",{className:"label-folder",htmlFor:"folder".concat(t),children:e.name})]},t):Object(I.jsx)("li",{children:"This folder is empty"})})),a.state.itemFiles.map((function(e,t){return Object(I.jsxs)("li",{className:"li-file",id:e._id,name:e.name,value:e.path,title:e.name,onClick:a.open,onContextMenu:a.choose,children:[x.isImage(e.name)?Object(I.jsx)("img",{className:"bg-img",id:"file".concat(t),src:a.getMedia(e),alt:"Img ".concat(t)}):x.isVideo(e.name)?Object(I.jsx)("video",{className:"bg-video",src:a.getMedia(e)}):Object(I.jsx)("i",{className:"material-icons bg-file",children:x.isAudio(e.name)?"audio_file":"description"}),Object(I.jsx)("label",{className:"label-file",htmlFor:"file".concat(t),style:{marginTop:x.isVideo(e.name)?"-8px":"85px"},children:e.name})]},t)}))]}),a.isEmpty()&&Object(I.jsxs)("div",{className:"empty-trash",children:[Object(I.jsx)("i",{className:"material-icons",children:"delete_outline"}),Object(I.jsx)("strong",{children:"Trash is Empty"})]})]}),a.state.media&&Object(I.jsx)(Y,{src:a.state.media,type:x.isImage(a.state.media)?"image":x.isVideo(a.state.media)?"video":x.isAudio(a.state.media)?"audio":"none",download:a.download,percent:a.state.percent,next:a.next,prev:a.prev,index:a.state.index,count:a.getMedias().length,close:a.close}),a.state.show&&Object(I.jsx)(z,{id:a.state.id,name:a.state.name,type:a.state.type,parent:a.state.parent,action:a.state.action,refresh:a.refresh,folders:a.state.folders,close:a.closeFolderTree})]})},a.state={id:"",type:"",parent:"",location:"",path:"/",name:"",folder:{_id:"root",path:"/",name:"root"},folders:[],items:[],files:[],itemFiles:[],percent:0,show:!1,action:"",media:"",index:""},a}return n}(a.Component),J=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).render=function(){return Object(I.jsx)("main",{children:x.isLogin()?"true"===x.getCookie("is_activate")?Object(I.jsx)(W,{}):Object(I.jsx)(H,{}):Object(I.jsx)(T,{})})},e}return n}(a.Component),Z={email:""},K=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){e.preventDefault()},a.render=function(){return Object(I.jsx)("main",{children:Object(I.jsx)("section",{className:"section-only",children:Object(I.jsxs)("form",{className:"form-only",onSubmit:a.onSubmit,children:[Object(I.jsx)("img",{className:"logo-img",src:"/logo.svg",alt:"CloudDrive16 logo"}),Object(I.jsx)("h1",{className:"h1-only",children:"Find my account"}),Object(I.jsxs)("div",{className:"form-group-email",children:[Object(I.jsx)("input",{className:"input-email",type:"email",name:"email",placeholder:"Email",value:a.state.email,pattern:x.emailPattern,onInput:a.enterEmail,onInvalid:a.enterEmail,onChange:a.setEmail,title:"Please fill out this field.",required:!0}),Object(I.jsx)("button",{className:"btn-input",type:"submit",disabled:!a.state.email,hidden:!0,children:Object(I.jsx)("i",{className:"material-icons",children:"input"})})]})]})})})},a.state=Z,a}return n}(a.Component),G=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).render=function(){return Object(I.jsxs)(d.a,{children:[Object(I.jsx)(D,{}),Object(I.jsx)(u.a,{exact:!0,path:"/",component:J}),Object(I.jsx)(u.a,{path:"/find-account",component:K})]})},e}return n}(a.Component),X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,123)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};i.a.render(Object(I.jsx)(s.a.StrictMode,{children:Object(I.jsx)(G,{})}),document.getElementById("root")),X()},73:function(e,t,n){},74:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.70218d49.chunk.js.map